{
  "schema_version": "2.0",
  "id": "q{N}_{technique_name}",
  "query_id": "q{N}",
  "dialect": "duckdb | postgresql",

  "classification": {
    "tags": ["___", "___"],
    "archetype": "star_schema_groupby | star_schema_conditional_aggregation | correlated_filter | multi_scan_consolidation | ...",
    "transforms": ["___", "___"],
    "complexity": "simple | moderate | complex"
  },

  "demonstrates_gaps": ["GAP_ID_1", "GAP_ID_2"],

  "original_sql": "-- Paste original SQL here",
  "optimized_sql": "-- Paste optimized SQL here",

  "explanation": {
    "what": "Specific transforms applied: ___",
    "why": "Performance mechanism: ___",
    "when": "Conditions + diagnostic signal: ___",
    "when_not": "Counter-indications with evidence (query IDs + regressions): ___"
  },

  "example": {
    "opportunity": "TRANSFORM_1 + TRANSFORM_2",
    "input_slice": "[main_query]:\n___",
    "output": {
      "rewrite_sets": [
        {
          "id": "rs_01",
          "transform": "___",
          "nodes": {},
          "invariants_kept": ["row_count", "column_set", "sort_order"],
          "expected_speedup": "___x",
          "risk": "low | medium | high"
        }
      ]
    },
    "key_insight": "___",
    "when_not_to_use": "___"
  },

  "outcome": {
    "speedup": 0.0,
    "original_ms": 0.0,
    "optimized_ms": 0.0,
    "validated_at_sf": 10,
    "validation_confidence": "high | row_count_only | zero_row_unverified",
    "rows_match": true,
    "checksum_match": true
  },

  "provenance": {
    "source_run": "swarm_batch_YYYYMMDD_HHMMSS",
    "worker_id": 0,
    "model": "deepseek-reasoner",
    "promoted_at": "YYYY-MM-DDTHH:MM:SSZ",
    "promoted_by": "human",
    "analysis_session": "AS-{ENGINE_SHORT}-{NNN}"
  },

  "status": "active",
  "superseded_by": null
}
