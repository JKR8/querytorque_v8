{
  "id": "LITERAL_PRESERVATION",
  "severity": "CRITICAL",
  "description": "All literal values (strings, numbers, dates) from the original query MUST be preserved EXACTLY in the rewrite",
  "failure_rate": "100% of Q2-Q16 failures were caused by hallucinated literals",
  "observed_failures": [
    {
      "query": "Q2",
      "original": "d_year = 2001, d_year = 2002",
      "hallucinated": "d_year = 1998, d_year = 1999",
      "type": "YEAR_HALLUCINATION"
    },
    {
      "query": "Q7",
      "original": "cd_gender = 'M', cd_marital_status = 'S', d_year = 2000",
      "hallucinated": "cd_gender = 'F', cd_marital_status = 'W', d_year = 2001",
      "type": "MULTIPLE_LITERAL_HALLUCINATION"
    },
    {
      "query": "Q10",
      "original": "d_year = 2002, ca_county IN ('Rush County', 'Toole County', 'Jefferson County', 'Dona Ana County', 'La Porte County')",
      "hallucinated": "d_year = 2001, ca_county IN ('Storey County', 'Marquette County', 'Warren County', 'Cochran County', 'Kandiyohi County')",
      "type": "YEAR_AND_STRING_HALLUCINATION"
    },
    {
      "query": "Q13",
      "original": "cd_marital_status = 'M', cd_education_status = 'Advanced Degree'",
      "hallucinated": "cd_marital_status = 'D', cd_education_status = 'Unknown'",
      "type": "STRING_HALLUCINATION"
    },
    {
      "query": "Q16",
      "original": "ca_state = 'GA', cc_county = 'Williamson County', d_date BETWEEN '2002-02-01' AND '2002-04-02'",
      "hallucinated": "ca_state = 'WV', cc_county IN ('Ziebach County', ...), d_date BETWEEN '2002-4-01' AND ...",
      "type": "STATE_COUNTY_DATE_HALLUCINATION"
    }
  ],
  "constraint_rules": [
    {
      "rule": "EXACT_STRING_MATCH",
      "description": "String literals in WHERE clauses must be copied character-for-character",
      "examples": [
        "'M' not 'F'",
        "'GA' not 'WV'",
        "'Rush County' not 'Storey County'"
      ]
    },
    {
      "rule": "EXACT_NUMBER_MATCH",
      "description": "Numeric literals (years, amounts, counts) must be copied exactly",
      "examples": [
        "2000 not 2001",
        "2002 not 2001",
        "100.00 not 150.00"
      ]
    },
    {
      "rule": "EXACT_DATE_MATCH",
      "description": "Date literals must be copied exactly, including format",
      "examples": [
        "'2002-02-01' not '2002-4-01'"
      ]
    },
    {
      "rule": "EXACT_LIST_MATCH",
      "description": "IN lists must contain the exact same values in the same order",
      "examples": [
        "IN ('TX', 'OH', 'TX') not IN ('SD', 'KS', 'MI')"
      ]
    }
  ],
  "prompt_instruction": "CRITICAL: When rewriting SQL, you MUST copy ALL literal values (strings, numbers, dates) EXACTLY from the original query. Do NOT invent, substitute, or 'improve' any filter values. If the original says d_year = 2000, your rewrite MUST say d_year = 2000. If the original says ca_state = 'GA', your rewrite MUST say ca_state = 'GA'. Changing these values will produce WRONG RESULTS and the rewrite will be REJECTED."
}
