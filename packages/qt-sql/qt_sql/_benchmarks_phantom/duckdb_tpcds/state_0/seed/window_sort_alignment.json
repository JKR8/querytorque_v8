{
  "id": "WINDOW_SORT_ALIGNMENT",
  "name": "Window Sort Alignment",
  "description": "Align window function ORDER BY clauses to minimize sorts when\n      multiple window functions are used in same query.",
  "category": "window_functions",
  "priority": "medium",
  "verified_speedup": "unknown",
  "example": {
    "before_sql": "SELECT id,\n          SUM(value) OVER (ORDER BY date ASC) as running_asc,\n          SUM(value) OVER (ORDER BY date DESC) as running_desc,\n          COUNT(*) OVER (ORDER BY date ASC) as count_asc\n      FROM transactions;",
    "after_sql": "-- Group same-sorted windows together\n      SELECT id,\n          SUM(value) OVER w_asc as running_asc,\n          COUNT(*) OVER w_asc as count_asc,\n          SUM(value) OVER (ORDER BY date DESC) as running_desc\n      FROM transactions\n      WINDOW w_asc AS (ORDER BY date ASC);",
    "alternative_sql": "",
    "key_insight": "Queries with multiple window functions using different orderings.\n      Group windows with same sort together.",
    "transforms": [
      "window_sort_alignment"
    ]
  },
  "metadata": {
    "pg_version": "All",
    "auto_applied_by_pg": "false",
    "research_source": "",
    "notes": ""
  }
}