- id: "QF-001"
  pattern: "bilateral_input_reduction"
  claim: >
    When a non-equi join has both sides exceeding 1M rows and independent
    filters exist on each side, pre-filtering both inputs via CTEs before
    the join achieves median 2.7x speedup.
  supporting_queries: ["query083", "query094", "query064"]
  evidence_summary: "3/5 non-equi joins with bilateral filters achieve >2x"
  contradicting_queries: ["query091"]
  contradiction_explanation: >
    query091 regresses because the filter on the inner side has <50%
    selectivity — the CTE fence cost exceeds the scan savings.
  boundaries:
    - "Both join inputs exceed 1M rows"
    - "Independent filters exist on each side (not cross-referencing)"
    - "Filter selectivity >50% (tight filters only)"
  mechanism: >
    PostgreSQL cannot push predicates past non-equi join conditions.
    Without pre-filtering, both sides are full-scanned before the
    per-tuple join filter evaluates. CTE pre-filtering reduces the
    cross-product space quadratically.
  confidence: "medium"
  confidence_rationale: "3 supporting queries but 1 clear regression case"
  implication: >
    Assign bilateral_input_reduction when non-equi join inputs are large
    and independent filters exist. Verify filter selectivity before
    assigning — loose filters (<50%) regress due to CTE fence overhead.
