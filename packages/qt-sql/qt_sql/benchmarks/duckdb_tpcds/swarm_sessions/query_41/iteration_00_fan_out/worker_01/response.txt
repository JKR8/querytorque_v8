## Modified Logic Tree

```
QUERY:
├── [!] CTE: matching_manufacturers_union
│   └── UNION_ALL (8 branches)
│       ├── BRANCH1: [Women] (gainsboro|aquamarine) ∧ (Ounce|Dozen) ∧ (medium|economy)
│       ├── BRANCH2: [Women] (chiffon|violet) ∧ (Ton|Pound) ∧ (extra large|small)
│       ├── BRANCH3: [Men] (chartreuse|blue) ∧ (Each|Oz) ∧ (N/A|large)
│       ├── BRANCH4: [Men] (tan|dodger) ∧ (Bunch|Tsp) ∧ (medium|economy)
│       ├── BRANCH5: [Women] (blanched|tomato) ∧ (Tbl|Case) ∧ (medium|economy)
│       ├── BRANCH6: [Women] (almond|lime) ∧ (Box|Dram) ∧ (extra large|small)
│       ├── BRANCH7: [Men] (peru|saddle) ∧ (Pallet|Gram) ∧ (N/A|large)
│       └── BRANCH8: [Men] (indian|spring) ∧ (Unknown|Carton) ∧ (medium|economy)
├── [!] CTE: filtered_items
│   └── SCAN item (i_manufact_id BETWEEN 748 AND 788)
├── [!] CTE: join
│   └── INNER_JOIN filtered_items × matching_manufacturers_union ON i_manufact
├── [!] CTE: distinct_products
│   └── AGGREGATE (GROUP BY i_product_name)
└── [!] main_query
    └── SELECT FROM distinct_products ORDER BY i_product_name LIMIT 100
```

## Component Payload JSON

```json
{
  "spec_version": "1.0",
  "dialect": "duckdb",
  "rewrite_rules": [
    {
      "id": "R1",
      "type": "or_to_union",
      "description": "Split cross-column OR pattern into 8 UNION ALL branches for predicate isolation",
      "applied_to": ["matching_manufacturers_union"]
    },
    {
      "id": "R2",
      "type": "correlated_to_join",
      "description": "Convert correlated COUNT(*) > 0 subquery to inner join on pre-computed manufacturer set",
      "applied_to": ["join", "matching_manufacturers_union", "filtered_items"]
    },
    {
      "id": "R3",
      "type": "pushdown_manufacturer_filter",
      "description": "Isolate i_manufact_id range filter to separate CTE to prevent leak into attribute matching",
      "applied_to": ["filtered_items"]
    }
  ],
  "statements": [{
    "target_table": null,
    "change": "modified",
    "components": {
      "matching_manufacturers_union": {
        "type": "cte",
        "change": "added",
        "sql": "SELECT DISTINCT i_manufact FROM (SELECT i_manufact FROM item WHERE i_category = 'Women' AND i_color IN ('gainsboro', 'aquamarine') AND i_units IN ('Ounce', 'Dozen') AND i_size IN ('medium', 'economy') UNION ALL SELECT i_manufact FROM item WHERE i_category = 'Women' AND i_color IN ('chiffon', 'violet') AND i_units IN ('Ton', 'Pound') AND i_size IN ('extra large', 'small') UNION ALL SELECT i_manufact FROM item WHERE i_category = 'Men' AND i_color IN ('chartreuse', 'blue') AND i_units IN ('Each', 'Oz') AND i_size IN ('N/A', 'large') UNION ALL SELECT i_manufact FROM item WHERE i_category = 'Men' AND i_color IN ('tan', 'dodger') AND i_units IN ('Bunch', 'Tsp') AND i_size IN ('medium', 'economy') UNION ALL SELECT i_manufact FROM item WHERE i_category = 'Women' AND i_color IN ('blanched', 'tomato') AND i_units IN ('Tbl', 'Case') AND i_size IN ('medium', 'economy') UNION ALL SELECT i_manufact FROM item WHERE i_category = 'Women' AND i_color IN ('almond', 'lime') AND i_units IN ('Box', 'Dram') AND i_size IN ('extra large', 'small') UNION ALL SELECT i_manufact FROM item WHERE i_category = 'Men' AND i_color IN ('peru', 'saddle') AND i_units IN ('Pallet', 'Gram') AND i_size IN ('N/A', 'large') UNION ALL SELECT i_manufact FROM item WHERE i_category = 'Men' AND i_color IN ('indian', 'spring') AND i_units IN ('Unknown', 'Carton') AND i_size IN ('medium', 'economy')) AS union_branches",
        "interfaces": {
          "outputs": ["i_manufact"],
          "consumes": []
        }
      },
      "filtered_items": {
        "type": "cte",
        "change": "added",
        "sql": "SELECT i_manufact, i_product_name FROM item WHERE i_manufact_id BETWEEN 748 AND 788",
        "interfaces": {
          "outputs": ["i_manufact", "i_product_name"],
          "consumes": []
        }
      },
      "join": {
        "type": "cte",
        "change": "added",
        "sql": "SELECT fi.i_product_name FROM filtered_items fi INNER JOIN matching_manufacturers_union mmu ON fi.i_manufact = mmu.i_manufact",
        "interfaces": {
          "outputs": ["i_product_name"],
          "consumes": ["filtered_items", "matching_manufacturers_union"]
        }
      },
      "distinct_products": {
        "type": "cte",
        "change": "added",
        "sql": "SELECT i_product_name FROM join GROUP BY i_product_name",
        "interfaces": {
          "outputs": ["i_product_name"],
          "consumes": ["join"]
        }
      },
      "main_query": {
        "type": "main_query",
        "change": "modified",
        "sql": "SELECT i_product_name FROM distinct_products ORDER BY i_product_name LIMIT 100",
        "interfaces": {
          "outputs": ["i_product_name"],
          "consumes": ["distinct_products"]
        }
      }
    },
    "reconstruction_order": ["matching_manufacturers_union", "filtered_items", "join", "distinct_products", "main_query"],
    "assembly_template": "WITH matching_manufacturers_union AS ({matching_manufacturers_union}), filtered_items AS ({filtered_items}), join AS ({join}), distinct_products AS ({distinct_products}) {main_query}"
  }],
  "macros": {},
  "frozen_blocks": [],
  "validation_checks": []
}
```

**Changes**: Converted correlated COUNT(*) > 0 subquery with complex OR patterns into a UNION ALL decomposition of 8 attribute bundles, then inner join with pre-filtered manufacturer range. This isolates predicate evaluation and enables per-branch optimization.

**Expected speedup**: 3-4x (or_to_union pattern + correlated-to-join transformation).