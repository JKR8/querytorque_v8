### Part 1: Modified Logic Tree

```
QUERY: (CTE pipeline)
├── [MAIN] main_query  [~]  Cost: 100%  Rows: ≤100  — CTE pipeline decorrelates subquery, precomputes matching manufacturers, filters candidate items, joins, deduplicates and limits.
│   ├── [~] matching_manufacturers (CTE)  [~]  — FROM item, WHERE (entire 8-pattern OR condition), GROUP BY i_manufact
│   ├── [~] filtered_items (CTE)  [~]  — FROM item, WHERE i_manufact_id BETWEEN 748 AND 788
│   ├── [~] join (CTE)  [~]  — INNER JOIN matching_manufacturers ON i_manufact
│   ├── [~] distinct_products (CTE)  [~]  — GROUP BY i_product_name
│   └── [~] limit (CTE)  [~]  — ORDER BY i_product_name ASC, LIMIT 100
└── OUTPUT (i_product_name)
```

### Part 2: Component Payload JSON

```json
{
  "spec_version": "1.0",
  "dialect": "duckdb",
  "rewrite_rules": [
    {"id": "R1", "type": "decorrelate", "description": "Extract correlated subquery into standalone CTE with GROUP BY i_manufact, removing correlation.", "applied_to": ["matching_manufacturers"]},
    {"id": "R2", "type": "cte_pipeline", "description": "Build CTE pipeline matching target logical tree: matching_manufacturers → filtered_items → join → distinct_products → limit.", "applied_to": ["matching_manufacturers", "filtered_items", "join", "distinct_products", "limit"]},
    {"id": "R3", "type": "preserve_semantics", "description": "Keep entire OR condition verbatim; maintain manufacturer join correlation via CTE join; preserve DISTINCT and ordering.", "applied_to": ["matching_manufacturers", "join"]}
  ],
  "statements": [{
    "target_table": null,
    "change": "modified",
    "components": {
      "matching_manufacturers": {
        "type": "cte",
        "change": "modified",
        "sql": "SELECT i_manufact FROM item WHERE ( (i_category = 'Women' AND (i_color = 'gainsboro' OR i_color = 'aquamarine') AND (i_units = 'Ounce' OR i_units = 'Dozen') AND (i_size = 'medium' OR i_size = 'economy')) OR (i_category = 'Women' AND (i_color = 'chiffon' OR i_color = 'violet') AND (i_units = 'Ton' OR i_units = 'Pound') AND (i_size = 'extra large' OR i_size = 'small')) OR (i_category = 'Men' AND (i_color = 'chartreuse' OR i_color = 'blue') AND (i_units = 'Each' OR i_units = 'Oz') AND (i_size = 'N/A' OR i_size = 'large')) OR (i_category = 'Men' AND (i_color = 'tan' OR i_color = 'dodger') AND (i_units = 'Bunch' OR i_units = 'Tsp') AND (i_size = 'medium' OR i_size = 'economy')) OR (i_category = 'Women' AND (i_color = 'blanched' OR i_color = 'tomato') AND (i_units = 'Tbl' OR i_units = 'Case') AND (i_size = 'medium' OR i_size = 'economy')) OR (i_category = 'Women' AND (i_color = 'almond' OR i_color = 'lime') AND (i_units = 'Box' OR i_units = 'Dram') AND (i_size = 'extra large' OR i_size = 'small')) OR (i_category = 'Men' AND (i_color = 'peru' OR i_color = 'saddle') AND (i_units = 'Pallet' OR i_units = 'Gram') AND (i_size = 'N/A' OR i_size = 'large')) OR (i_category = 'Men' AND (i_color = 'indian' OR i_color = 'spring') AND (i_units = 'Unknown' OR i_units = 'Carton') AND (i_size = 'medium' OR i_size = 'economy')) ) GROUP BY i_manufact",
        "interfaces": {"outputs": ["i_manufact"], "consumes": []}
      },
      "filtered_items": {
        "type": "cte",
        "change": "modified",
        "sql": "SELECT i_manufact, i_product_name FROM item WHERE i_manufact_id BETWEEN 748 AND 788",
        "interfaces": {"outputs": ["i_manufact", "i_product_name"], "consumes": []}
      },
      "join": {
        "type": "cte",
        "change": "modified",
        "sql": "SELECT filtered_items.i_product_name FROM filtered_items INNER JOIN matching_manufacturers ON filtered_items.i_manufact = matching_manufacturers.i_manufact",
        "interfaces": {"outputs": ["i_product_name"], "consumes": ["matching_manufacturers", "filtered_items"]}
      },
      "distinct_products": {
        "type": "cte",
        "change": "modified",
        "sql": "SELECT i_product_name FROM join GROUP BY i_product_name",
        "interfaces": {"outputs": ["i_product_name"], "consumes": ["join"]}
      },
      "limit": {
        "type": "cte",
        "change": "modified",
        "sql": "SELECT i_product_name FROM distinct_products ORDER BY i_product_name ASC LIMIT 100",
        "interfaces": {"outputs": ["i_product_name"], "consumes": ["distinct_products"]}
      },
      "main_query": {
        "type": "main_query",
        "change": "modified",
        "sql": "SELECT i_product_name FROM limit",
        "interfaces": {"outputs": ["i_product_name"], "consumes": ["limit"]}
      }
    },
    "reconstruction_order": ["matching_manufacturers", "filtered_items", "join", "distinct_products", "limit", "main_query"],
    "assembly_template": "WITH matching_manufacturers AS ({matching_manufacturers}), filtered_items AS ({filtered_items}), join AS ({join}), distinct_products AS ({distinct_products}), limit AS ({limit}) {main_query}"
  }],
  "macros": {},
  "frozen_blocks": [],
  "validation_checks": []
}
```

**Changes**: Decorrelated the correlated subquery by extracting it into a standalone CTE (`matching_manufacturers`) that precomputes manufacturers with at least one matching item, then joining it with filtered candidate items. This transforms N re-executions of the subquery into a single scan + hash join.

**Expected speedup**: ~2-3x due to elimination of correlated subquery overhead, enabling predicate pushdown into `matching_manufacturers` scan and hash join efficiency.