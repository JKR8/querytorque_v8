{
  "id": "EXISTS_SUBPLAN_TO_SEMI_JOIN",
  "name": "Exists Subplan To Semi Join",
  "description": "Restructure EXISTS subqueries to ensure PostgreSQL recognizes semi-join\n      pattern. Moving correlation condition placement can enable semi-join\n      vs SubPlan execution.",
  "category": "subquery_transformations",
  "priority": "medium",
  "verified_speedup": "unknown",
  "example": {
    "before_sql": "-- May produce SubPlan with ANSI join syntax\n      SELECT * FROM customers c\n      WHERE EXISTS (\n          SELECT 1 FROM orders o\n          JOIN order_items oi ON o.id = oi.order_id\n          WHERE o.customer_id = c.id\n      );",
    "after_sql": "-- Comma-join with correlation in WHERE promotes Semi Join\n      SELECT * FROM customers c\n      WHERE EXISTS (\n          SELECT 1 FROM orders o, order_items oi\n          WHERE o.id = oi.order_id\n            AND o.customer_id = c.id\n      );",
    "alternative_sql": "",
    "key_insight": "When EXPLAIN shows SubPlan for EXISTS instead of Semi Join. Often\n      triggered by ANSI JOIN syntax inside the EXISTS subquery.",
    "transforms": [
      "exists_subplan_to_semi_join"
    ]
  },
  "metadata": {
    "pg_version": "All",
    "auto_applied_by_pg": "Syntax dependent",
    "research_source": "",
    "notes": ""
  }
}