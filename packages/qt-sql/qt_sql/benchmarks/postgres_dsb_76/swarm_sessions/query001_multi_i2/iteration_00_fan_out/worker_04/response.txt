### Part 1: Modified Logic Tree
```
QUERY: (single statement)
├── [CTE] returns_with_store_avg  [!]  Cost: 4%  Rows: ~93K
│   ├── SCAN (store_returns, date_dim (INNER JOIN))
│   ├── JOIN (sr_returned_date_sk = d_date_sk)
│   ├── FILTER (d_year = 2000)
│   ├── FILTER (sr_return_amt / sr_return_quantity BETWEEN 115 AND 174)
│   ├── AGG (GROUP BY sr_customer_sk, sr_store_sk, sr_reason_sk)
│   ├── [~] WINDOW (PARTITION BY sr_store_sk) → AVG(SUM(SR_RETURN_AMT_INC_TAX))*1.2 AS store_avg_threshold
│   └── OUTPUT (ctr_customer_sk, ctr_store_sk, ctr_reason_sk, ctr_total_return, store_avg_threshold)
└── [MAIN] main_query  [!]  Cost: 96%  Rows: ~final
    ├── SCAN (returns_with_store_avg AS r (join), store (join), customer (join), customer_demographics (join))
    ├── JOIN (s_store_sk = r.ctr_store_sk)
    ├── JOIN (r.ctr_customer_sk = c_customer_sk)
    ├── JOIN (c_current_cdemo_sk = cd_demo_sk)
    ├── [-][SubPlan] correlated subquery removed
    ├── FILTER (r.ctr_total_return > r.store_avg_threshold)
    ├── FILTER (r.ctr_reason_sk BETWEEN 17 AND 20)
    ├── FILTER (+6 more)
    ├── SORT (c_customer_id ASC)
    └── OUTPUT (c_customer_id)
```

### Part 2: Component Payload JSON

```json
{
  "spec_version": "1.0",
  "dialect": "postgresql",
  "rewrite_rules": [
    {"id": "R1", "type": "correlated_subquery_elimination", "description": "Replace correlated subquery with window function computing store average in single pass", "applied_to": ["returns_with_store_avg"]},
    {"id": "R2", "type": "explicit_joins", "description": "Convert comma-separated joins to explicit JOIN syntax", "applied_to": ["returns_with_store_avg", "main_query"]}
  ],
  "statements": [{
    "target_table": null,
    "change": "modified",
    "components": {
      "returns_with_store_avg": {
        "type": "cte",
        "change": "modified",
        "sql": "SELECT sr_customer_sk AS ctr_customer_sk,\n       sr_store_sk AS ctr_store_sk,\n       sr_reason_sk AS ctr_reason_sk,\n       SUM(sr_return_amt_inc_tax) AS ctr_total_return,\n       AVG(SUM(sr_return_amt_inc_tax)) OVER (PARTITION BY sr_store_sk) * 1.2 AS store_avg_threshold\nFROM store_returns\nINNER JOIN date_dim ON sr_returned_date_sk = d_date_sk\nWHERE d_year = 2000\n  AND sr_return_amt / sr_return_quantity BETWEEN 115 AND 174\nGROUP BY sr_customer_sk, sr_store_sk, sr_reason_sk",
        "interfaces": {"outputs": ["ctr_customer_sk", "ctr_store_sk", "ctr_reason_sk", "ctr_total_return", "store_avg_threshold"], "consumes": []}
      },
      "main_query": {
        "type": "main_query",
        "change": "modified",
        "sql": "SELECT c_customer_id\nFROM returns_with_store_avg r\nINNER JOIN store ON s_store_sk = r.ctr_store_sk\nINNER JOIN customer ON c_customer_sk = r.ctr_customer_sk\nINNER JOIN customer_demographics ON cd_demo_sk = c_current_cdemo_sk\nWHERE r.ctr_total_return > r.store_avg_threshold\n  AND r.ctr_reason_sk BETWEEN 17 AND 20\n  AND s_state IN ('IA', 'KY', 'NE')\n  AND cd_marital_status IN ('S', 'S')\n  AND cd_education_status IN ('4 yr Degree', '4 yr Degree')\n  AND cd_gender = 'M'\n  AND c_birth_month = 4\n  AND c_birth_year BETWEEN 1987 AND 1993\nORDER BY c_customer_id\nLIMIT 100",
        "interfaces": {"outputs": ["c_customer_id"], "consumes": ["returns_with_store_avg"]}
      }
    },
    "reconstruction_order": ["returns_with_store_avg", "main_query"],
    "assembly_template": "WITH returns_with_store_avg AS ({returns_with_store_avg}) {main_query}"
  }],
  "macros": {},
  "frozen_blocks": [],
  "runtime_config": [],
  "validation_checks": []
}
```

**Changes**: Replaced the correlated subquery with a window function that computes store averages in the same pass as customer aggregates, eliminating ~8.8K subquery executions. Converted implicit joins to explicit JOIN syntax for clarity.

**Expected speedup**: ~95% reduction in execution time (from seconds to milliseconds) by eliminating correlated subquery and redundant CTE scans.