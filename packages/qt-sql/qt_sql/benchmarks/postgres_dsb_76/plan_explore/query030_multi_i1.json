{
  "query_id": "query030_multi_i1",
  "baseline_cost": 42604.61,
  "baseline_plan_node": "Limit",
  "baseline_joins": [
    "Nested Loop(Inner)",
    "Nested Loop(Inner)",
    "Hash Join(Inner)",
    "Nested Loop(Inner)",
    "Nested Loop(Inner)"
  ],
  "baseline_scans": [
    "Seq Scan(web_returns)",
    "Index Only Scan(date_dim,_dta_index_date_dim_6_661577395__k7_k1)",
    "Index Scan(item,item_pkey)",
    "Index Scan(customer_address,customer_address_pkey)",
    "CTE Scan(?)",
    "CTE Scan(?)",
    "Index Scan(customer,_dta_index_customer_6_949578421__k1_k5)",
    "Index Scan(customer_address,customer_address_pkey)"
  ],
  "baseline_table_order": [
    "web_returns",
    "date_dim",
    "item",
    "customer_address",
    "customer",
    "customer_address"
  ],
  "n_explains": 46,
  "n_distinct_plans": 25,
  "n_plan_changers": 8,
  "plan_changers": [
    "no_nestloop",
    "no_hashjoin",
    "no_seqscan",
    "force_merge",
    "force_nestloop",
    "no_parallel",
    "max_parallel",
    "ssd_costs"
  ],
  "distinct_plans": [
    {
      "fingerprint_hash": 2233025898,
      "combos": [
        "baseline",
        "no_mergejoin",
        "work_mem_256mb",
        "work_mem_1gb",
        "work_mem_2gb",
        "no_jit",
        "no_reorder",
        "max_reorder"
      ],
      "cost": 42604.61,
      "is_baseline": true,
      "cost_ratio": 1.0
    },
    {
      "fingerprint_hash": 3594425006,
      "combos": [
        "no_nestloop",
        "force_hash",
        "no_nestloop+ssd_costs"
      ],
      "cost": 82681.21,
      "is_baseline": false,
      "cost_ratio": 0.5152876935400437
    },
    {
      "fingerprint_hash": 2566604657,
      "combos": [
        "no_hashjoin"
      ],
      "cost": 42774.3,
      "is_baseline": false,
      "cost_ratio": 0.9960328982590012
    },
    {
      "fingerprint_hash": 2885259989,
      "combos": [
        "no_seqscan",
        "no_seqscan+max_parallel",
        "no_seqscan+ssd_costs"
      ],
      "cost": 71367.01,
      "is_baseline": false,
      "cost_ratio": 0.5969790523660723
    },
    {
      "fingerprint_hash": 4195329794,
      "combos": [
        "force_merge",
        "no_nestloop+no_hashjoin",
        "no_nestloop+force_merge",
        "no_hashjoin+force_merge",
        "force_merge+ssd_costs"
      ],
      "cost": 98015.29,
      "is_baseline": false,
      "cost_ratio": 0.4346731004927905
    },
    {
      "fingerprint_hash": 3640845644,
      "combos": [
        "force_nestloop",
        "no_hashjoin+force_nestloop"
      ],
      "cost": 43052.45,
      "is_baseline": false,
      "cost_ratio": 0.9895978045384177
    },
    {
      "fingerprint_hash": 2333539328,
      "combos": [
        "no_parallel",
        "no_parallel+ssd_costs"
      ],
      "cost": 62689.16,
      "is_baseline": false,
      "cost_ratio": 0.6796168587998308
    },
    {
      "fingerprint_hash": 3715889964,
      "combos": [
        "max_parallel",
        "no_parallel+max_parallel"
      ],
      "cost": 39205.62,
      "is_baseline": false,
      "cost_ratio": 1.0866964991243602
    },
    {
      "fingerprint_hash": 1465709486,
      "combos": [
        "ssd_costs",
        "ssd_plus_mem",
        "max_parallel+ssd_costs"
      ],
      "cost": 32881.36,
      "is_baseline": false,
      "cost_ratio": 1.2957070510465505
    },
    {
      "fingerprint_hash": 2968083087,
      "combos": [
        "no_nestloop+no_seqscan"
      ],
      "cost": 202926.42,
      "is_baseline": false,
      "cost_ratio": 0.20995102559834247
    },
    {
      "fingerprint_hash": 860247706,
      "combos": [
        "no_nestloop+force_nestloop",
        "force_merge+force_nestloop"
      ],
      "cost": 50000078493.79,
      "is_baseline": false,
      "cost_ratio": 8.520908623231758e-07
    },
    {
      "fingerprint_hash": 3959941640,
      "combos": [
        "no_nestloop+no_parallel"
      ],
      "cost": 111005.79,
      "is_baseline": false,
      "cost_ratio": 0.3838052952012684
    },
    {
      "fingerprint_hash": 3674163572,
      "combos": [
        "no_nestloop+max_parallel"
      ],
      "cost": 78573.53,
      "is_baseline": false,
      "cost_ratio": 0.5422259888285533
    },
    {
      "fingerprint_hash": 3018775654,
      "combos": [
        "no_hashjoin+no_seqscan"
      ],
      "cost": 71368.77,
      "is_baseline": false,
      "cost_ratio": 0.5969643304767617
    },
    {
      "fingerprint_hash": 126654536,
      "combos": [
        "no_hashjoin+no_parallel"
      ],
      "cost": 63157.14,
      "is_baseline": false,
      "cost_ratio": 0.674581052910249
    },
    {
      "fingerprint_hash": 1623261252,
      "combos": [
        "no_hashjoin+max_parallel"
      ],
      "cost": 39330.3,
      "is_baseline": false,
      "cost_ratio": 1.0832515897412427
    },
    {
      "fingerprint_hash": 262989977,
      "combos": [
        "no_hashjoin+ssd_costs"
      ],
      "cost": 32885.88,
      "is_baseline": false,
      "cost_ratio": 1.2955289625821174
    },
    {
      "fingerprint_hash": 2965741789,
      "combos": [
        "no_seqscan+force_merge"
      ],
      "cost": 210536.45,
      "is_baseline": false,
      "cost_ratio": 0.2023621562917015
    },
    {
      "fingerprint_hash": 3638439915,
      "combos": [
        "no_seqscan+force_nestloop"
      ],
      "cost": 71471.07,
      "is_baseline": false,
      "cost_ratio": 0.596109866551599
    },
    {
      "fingerprint_hash": 1469795695,
      "combos": [
        "no_seqscan+no_parallel"
      ],
      "cost": 157034.93,
      "is_baseline": false,
      "cost_ratio": 0.2713065812809927
    },
    {
      "fingerprint_hash": 949553391,
      "combos": [
        "force_merge+no_parallel"
      ],
      "cost": 125496.16,
      "is_baseline": false,
      "cost_ratio": 0.33948935170606015
    },
    {
      "fingerprint_hash": 1398847976,
      "combos": [
        "force_merge+max_parallel"
      ],
      "cost": 91479.79,
      "is_baseline": false,
      "cost_ratio": 0.46572702014291906
    },
    {
      "fingerprint_hash": 3605361035,
      "combos": [
        "force_nestloop+no_parallel"
      ],
      "cost": 63790.37,
      "is_baseline": false,
      "cost_ratio": 0.6678846666040658
    },
    {
      "fingerprint_hash": 1548727070,
      "combos": [
        "force_nestloop+max_parallel"
      ],
      "cost": 39548.01,
      "is_baseline": false,
      "cost_ratio": 1.0772883389075707
    },
    {
      "fingerprint_hash": 778621618,
      "combos": [
        "force_nestloop+ssd_costs"
      ],
      "cost": 32967.47,
      "is_baseline": false,
      "cost_ratio": 1.2923227047753436
    }
  ],
  "vulnerabilities": [
    {
      "type": "JOIN_TYPE_TRAP",
      "combos": [
        "no_nestloop",
        "no_hashjoin",
        "no_seqscan",
        "force_hash",
        "force_merge",
        "force_nestloop",
        "ssd_costs",
        "ssd_plus_mem",
        "no_nestloop+no_hashjoin",
        "no_nestloop+no_seqscan",
        "no_nestloop+force_merge",
        "no_nestloop+force_nestloop",
        "no_nestloop+no_parallel",
        "no_nestloop+max_parallel",
        "no_nestloop+ssd_costs",
        "no_hashjoin+no_seqscan",
        "no_hashjoin+force_merge",
        "no_hashjoin+force_nestloop",
        "no_hashjoin+no_parallel",
        "no_hashjoin+max_parallel",
        "no_hashjoin+ssd_costs",
        "no_seqscan+force_merge",
        "no_seqscan+force_nestloop",
        "no_seqscan+no_parallel",
        "no_seqscan+max_parallel",
        "no_seqscan+ssd_costs",
        "force_merge+force_nestloop",
        "force_merge+no_parallel",
        "force_merge+max_parallel",
        "force_merge+ssd_costs",
        "force_nestloop+no_parallel",
        "force_nestloop+max_parallel",
        "force_nestloop+ssd_costs",
        "max_parallel+ssd_costs"
      ],
      "description": "Optimizer join type choice is vulnerable. 34 combos change join types.",
      "detail": [
        "no_nestloop: ['Nested Loop(Inner)'] \u2192 []",
        "no_hashjoin: ['Hash Join(Inner)'] \u2192 ['Merge Join(Inner)']",
        "no_seqscan: [] \u2192 []"
      ]
    },
    {
      "type": "JOIN_ORDER_TRAP",
      "combos": [
        "no_nestloop",
        "no_seqscan",
        "force_hash",
        "force_merge",
        "ssd_costs",
        "ssd_plus_mem",
        "no_nestloop+no_hashjoin",
        "no_nestloop+no_seqscan",
        "no_nestloop+force_merge",
        "no_nestloop+force_nestloop",
        "no_nestloop+no_parallel",
        "no_nestloop+max_parallel",
        "no_nestloop+ssd_costs",
        "no_hashjoin+no_seqscan",
        "no_hashjoin+force_merge",
        "no_hashjoin+ssd_costs",
        "no_seqscan+force_merge",
        "no_seqscan+force_nestloop",
        "no_seqscan+no_parallel",
        "no_seqscan+max_parallel",
        "no_seqscan+ssd_costs",
        "force_merge+force_nestloop",
        "force_merge+no_parallel",
        "force_merge+max_parallel",
        "force_merge+ssd_costs",
        "force_nestloop+ssd_costs",
        "max_parallel+ssd_costs"
      ],
      "description": "Join enumeration is unstable. 27 combos change table access order.",
      "detail": [
        "no_nestloop: [web_returns, date_dim, item, customer_address, customer, customer_address] \u2192 [customer_address, web_returns, date_dim, item, customer, customer_address]",
        "no_seqscan: [web_returns, date_dim, item, customer_address, customer, customer_address] \u2192 [item, web_returns, date_dim, customer_address, customer, customer_address]"
      ]
    },
    {
      "type": "SCAN_TYPE_TRAP",
      "combos": [
        "no_nestloop",
        "no_seqscan",
        "force_hash",
        "force_merge",
        "ssd_costs",
        "ssd_plus_mem",
        "no_nestloop+no_hashjoin",
        "no_nestloop+no_seqscan",
        "no_nestloop+force_merge",
        "no_nestloop+force_nestloop",
        "no_nestloop+no_parallel",
        "no_nestloop+max_parallel",
        "no_nestloop+ssd_costs",
        "no_hashjoin+no_seqscan",
        "no_hashjoin+force_merge",
        "no_hashjoin+ssd_costs",
        "no_seqscan+force_merge",
        "no_seqscan+force_nestloop",
        "no_seqscan+no_parallel",
        "no_seqscan+max_parallel",
        "no_seqscan+ssd_costs",
        "force_merge+force_nestloop",
        "force_merge+no_parallel",
        "force_merge+max_parallel",
        "force_merge+ssd_costs",
        "force_nestloop+ssd_costs",
        "max_parallel+ssd_costs"
      ],
      "description": "Scan type choice is vulnerable. 27 combos change scan types.",
      "detail": [
        "no_nestloop: ['Index Scan(item,item_pkey)', 'Index Scan(customer,_dta_index_customer_6_949578421__k1_k5)', 'Index Scan(customer_address,customer_address_pkey)'] \u2192 ['Seq Scan(customer_address)', 'Seq Scan(customer)', 'Seq Scan(item)']",
        "no_seqscan: ['Seq Scan(web_returns)'] \u2192 ['Index Scan(web_returns,web_returns_pkey)']",
        "force_hash: ['Index Scan(item,item_pkey)', 'Index Scan(customer,_dta_index_customer_6_949578421__k1_k5)', 'Index Scan(customer_address,customer_address_pkey)'] \u2192 ['Seq Scan(customer_address)', 'Seq Scan(customer)', 'Seq Scan(item)']"
      ]
    },
    {
      "type": "MEMORY_SENSITIVITY",
      "combos": [
        "ssd_plus_mem",
        "ssd_plus_mem"
      ],
      "description": "Plan structure changes with memory settings \u2014 likely hash/sort spill in baseline.",
      "detail": [
        "ssd_plus_mem",
        "ssd_plus_mem"
      ]
    }
  ],
  "pair_results_novel": [
    "no_nestloop+no_seqscan",
    "no_nestloop+force_nestloop",
    "no_nestloop+no_parallel",
    "no_nestloop+max_parallel",
    "no_hashjoin+no_seqscan",
    "no_hashjoin+no_parallel",
    "no_hashjoin+max_parallel",
    "no_hashjoin+ssd_costs",
    "no_seqscan+force_merge",
    "no_seqscan+force_nestloop",
    "no_seqscan+no_parallel",
    "force_merge+no_parallel",
    "force_merge+max_parallel",
    "force_nestloop+no_parallel",
    "force_nestloop+max_parallel",
    "force_nestloop+ssd_costs"
  ],
  "explored_at": "2026-02-09T21:12:44.681499"
}