{
  "iteration": 0,
  "n_api_calls": 5,
  "best_speedup": 1.09,
  "best_patch_id": "t1",
  "best_sql": "WITH filtered_date AS (SELECT d_date_sk FROM date_dim WHERE d_year = 2001 AND d_moy = 12), filtered_cd AS (SELECT cd_demo_sk, cd_marital_status, cd_education_status FROM customer_demographics WHERE (cd_marital_status = 'M' AND cd_education_status = 'Unknown') OR (cd_marital_status = 'W' AND cd_education_status = 'Advanced Degree')), filtered_hd AS (SELECT hd_demo_sk FROM household_demographics WHERE hd_buy_potential LIKE '>10000%'), filtered_ca AS (SELECT ca_address_sk FROM customer_address WHERE ca_gmt_offset = -6) SELECT cc_call_center_id AS Call_Center, cc_name AS Call_Center_Name, cc_manager AS Manager, SUM(cr_net_loss) AS Returns_Loss FROM catalog_returns JOIN filtered_date ON cr_returned_date_sk = d_date_sk JOIN call_center ON cr_call_center_sk = cc_call_center_sk JOIN customer ON cr_returning_customer_sk = c_customer_sk JOIN filtered_cd ON cd_demo_sk = c_current_cdemo_sk JOIN filtered_hd ON hd_demo_sk = c_current_hdemo_sk JOIN filtered_ca ON ca_address_sk = c_current_addr_sk WHERE TRUE GROUP BY cc_call_center_id, cc_name, cc_manager, cd_marital_status, cd_education_status ORDER BY SUM(cr_net_loss) DESC;",
  "patches": [
    {
      "patch_id": "t1",
      "family": "A",
      "transform": "early_filtering",
      "relevance_score": 0.95,
      "status": "IMPROVED",
      "speedup": 1.09,
      "semantic_passed": true,
      "error": null,
      "original_ms": 199.4,
      "patch_ms": 183.4,
      "output_sql": "WITH filtered_date AS (SELECT d_date_sk FROM date_dim WHERE d_year = 2001 AND d_moy = 12), filtered_cd AS (SELECT cd_demo_sk, cd_marital_status, cd_education_status FROM customer_demographics WHERE (cd_marital_status = 'M' AND cd_education_status = 'Unknown') OR (cd_marital_status = 'W' AND cd_education_status = 'Advanced Degree')), filtered_hd AS (SELECT hd_demo_sk FROM household_demographics WHERE hd_buy_potential LIKE '>10000%'), filtered_ca AS (SELECT ca_address_sk FROM customer_address WHERE ca_gmt_offset = -6) SELECT cc_call_center_id AS Call_Center, cc_name AS Call_Center_Name, cc_manager AS Manager, SUM(cr_net_loss) AS Returns_Loss FROM catalog_returns JOIN filtered_date ON cr_returned_date_sk = d_date_sk JOIN call_center ON cr_call_center_sk = cc_call_center_sk JOIN customer ON cr_returning_customer_sk = c_customer_sk JOIN filtered_cd ON cd_demo_sk = c_current_cdemo_sk JOIN filtered_hd ON hd_demo_sk = c_current_hdemo_sk JOIN filtered_ca ON ca_address_sk = c_current_addr_sk WHERE TRUE GROUP BY cc_call_center_id, cc_name, cc_manager, cd_marital_status, cd_education_status ORDER BY SUM(cr_net_loss) DESC;",
      "has_explain": true
    },
    {
      "patch_id": "t2",
      "family": "E+F",
      "transform": "multi_dimension_prefetch+explicit_join_ordering",
      "relevance_score": 0.85,
      "status": "NEUTRAL",
      "speedup": 1.02,
      "semantic_passed": true,
      "error": null,
      "original_ms": 199.4,
      "patch_ms": 196.4,
      "output_sql": "WITH prefetched_dims AS (SELECT cd_demo_sk, hd_demo_sk, ca_address_sk, cd_marital_status, cd_education_status FROM customer_demographics, household_demographics, customer_address WHERE ((cd_marital_status = 'M' AND cd_education_status = 'Unknown') OR (cd_marital_status = 'W' AND cd_education_status = 'Advanced Degree')) AND hd_buy_potential LIKE '>10000%' AND ca_gmt_offset = -6) SELECT cc_call_center_id AS Call_Center, cc_name AS Call_Center_Name, cc_manager AS Manager, SUM(cr_net_loss) AS Returns_Loss FROM catalog_returns JOIN date_dim ON cr_returned_date_sk = d_date_sk JOIN call_center ON cr_call_center_sk = cc_call_center_sk JOIN customer ON cr_returning_customer_sk = c_customer_sk JOIN prefetched_dims ON cd_demo_sk = c_current_cdemo_sk AND hd_demo_sk = c_current_hdemo_sk AND ca_address_sk = c_current_addr_sk WHERE d_year = 2001 AND d_moy = 12 GROUP BY cc_call_center_id, cc_name, cc_manager, cd_marital_status, cd_education_status ORDER BY SUM(cr_net_loss) DESC;",
      "has_explain": true
    },
    {
      "patch_id": "syn_w1",
      "family": "A",
      "transform": "early_filter",
      "relevance_score": 0.3,
      "status": "FAIL",
      "speedup": null,
      "semantic_passed": false,
      "error": "Equivalence execution error: column \"cd_marital_status\" does not exist\nLINE 1: ... GROUP BY cc_call_center_id, cc_name, cc_manager, cd_marital...\n                                                             ^\n",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_date AS (SELECT d_date_sk FROM date_dim WHERE d_year = 2001 AND d_moy = 12), filtered_cd AS (SELECT cd_demo_sk FROM customer_demographics WHERE (cd_marital_status = 'M' AND cd_education_status = 'Unknown') OR (cd_marital_status = 'W' AND cd_education_status = 'Advanced Degree')), filtered_hd AS (SELECT hd_demo_sk FROM household_demographics WHERE hd_buy_potential LIKE '>10000%'), filtered_ca AS (SELECT ca_address_sk FROM customer_address WHERE ca_gmt_offset = -6) SELECT cc_call_center_id AS Call_Center, cc_name AS Call_Center_Name, cc_manager AS Manager, SUM(cr_net_loss) AS Returns_Loss FROM catalog_returns JOIN filtered_date ON cr_returned_date_sk = d_date_sk JOIN call_center ON cr_call_center_sk = cc_call_center_sk JOIN customer ON cr_returning_customer_sk = c_customer_sk JOIN filtered_cd ON cd_demo_sk = c_current_cdemo_sk JOIN filtered_hd ON hd_demo_sk = c_current_hdemo_sk JOIN filtered_ca ON ca_address_sk = c_current_addr_sk WHERE TRUE GROUP BY cc_call_center_id, cc_name, cc_manager, cd_marital_status, cd_education_status ORDER BY SUM(cr_net_loss) DESC;",
      "has_explain": false
    },
    {
      "patch_id": "syn_w2",
      "family": "B",
      "transform": "decorrelate",
      "relevance_score": 0.3,
      "status": "FAIL",
      "speedup": null,
      "semantic_passed": false,
      "error": "Equivalence execution error: current transaction is aborted, commands ignored until end of transaction block\n",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_date AS (SELECT d_date_sk FROM date_dim WHERE d_year = 2001 AND d_moy = 12), filtered_cd AS (SELECT cd_demo_sk FROM customer_demographics WHERE (cd_marital_status = 'M' AND cd_education_status = 'Unknown') OR (cd_marital_status = 'W' AND cd_education_status = 'Advanced Degree')), filtered_hd AS (SELECT hd_demo_sk FROM household_demographics WHERE hd_buy_potential LIKE '>10000%'), filtered_ca AS (SELECT ca_address_sk FROM customer_address WHERE ca_gmt_offset = -6) SELECT cc_call_center_id AS Call_Center, cc_name AS Call_Center_Name, cc_manager AS Manager, SUM(cr_net_loss) AS Returns_Loss FROM catalog_returns JOIN filtered_date ON cr_returned_date_sk = d_date_sk JOIN call_center ON cr_call_center_sk = cc_call_center_sk JOIN customer ON cr_returning_customer_sk = c_customer_sk JOIN filtered_cd ON cd_demo_sk = c_current_cdemo_sk JOIN filtered_hd ON hd_demo_sk = c_current_hdemo_sk JOIN filtered_ca ON ca_address_sk = c_current_addr_sk GROUP BY cc_call_center_id, cc_name, cc_manager, cd_marital_status, cd_education_status ORDER BY SUM(cr_net_loss) DESC;",
      "has_explain": false
    }
  ],
  "explains": {
    "t1": "Sort  (rows=8, time=225.927)\n  Aggregate  (rows=8, time=225.913)\n    Gather Merge  (rows=23, time=225.892)\n      Aggregate  (rows=8, time=215.12)\n        Sort  (rows=157, time=215.075)\n          Nested Loop  (rows=157, time=214.82)\n            Nested Loop  (rows=290, time=210.988)\n              Nested Loop  (rows=1855, time=188.285)\n                Nested Loop  (rows=10409, time=172.593)\n                  Hash Join  (rows=10509, time=91.07)\n                    Hash Join  (rows=10720, time=89.088",
    "t2": "Sort  (rows=8, time=229.024)\n  Aggregate  (rows=8, time=229.004)\n    Gather Merge  (rows=23, time=228.983)\n      Aggregate  (rows=8, time=219.029)\n        Sort  (rows=157, time=218.975)\n          Nested Loop  (rows=157, time=218.666)\n            Nested Loop  (rows=290, time=214.815)\n              Nested Loop  (rows=1855, time=191.988)\n                Nested Loop  (rows=10409, time=175.791)\n                  Hash Join  (rows=10509, time=94.894)\n                    Hash Join  (rows=10720, time=92."
  }
}