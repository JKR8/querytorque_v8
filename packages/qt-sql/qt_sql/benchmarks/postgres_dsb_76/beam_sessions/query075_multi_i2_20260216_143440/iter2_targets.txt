[
  {
    "target_id": "t1",
    "family": "A+E",
    "transform": "push_returns_filter_and_precompute_items",
    "relevance_score": 0.95,
    "hypothesis": "Push returns reason_sk filters into table scans and precompute filtered item CTE to reduce Seq Scan rows (original: 782k/794k/773k) and avoid repeated item scans.",
    "target_ir": "CTE_Q_S0_all_sales \u2192 sales_detail subqueries",
    "recommended_examples": [
      "pg_date_cte_explicit_join",
      "multi_dimension_prefetch"
    ]
  },
  {
    "target_id": "t1",
    "family": "C",
    "transform": "preaggregate_returns",
    "relevance_score": 0.85,
    "hypothesis": "Pre-aggregate returns by (order_number, item_sk) before joining sales to reduce Nested Loop input rows (original: 154k/119k in web/catalog branches).",
    "target_ir": "CTE_Q_S0_all_sales \u2192 sales_detail LEFT JOINs",
    "recommended_examples": [
      "pg_materialized_dimension_fact_prefilter"
    ]
  },
  {
    "target_id": "t1",
    "family": "E+A",
    "transform": "precompute_filtered_items_and_returns",
    "relevance_score": 0.8,
    "hypothesis": "Precompute filtered returns (reason_sk) and items (category) as CTEs to avoid repeated scans. Fixes t2's failure via explicit table replacement.",
    "target_ir": "sales_detail subqueries \u2192 FROM clauses",
    "recommended_examples": [
      "multi_dimension_prefetch",
      "pg_date_cte_explicit_join"
    ]
  },
  {
    "target_id": "t1",
    "family": "F",
    "transform": "convert_union_to_join",
    "relevance_score": 0.75,
    "hypothesis": "Replace UNION with single query using CASE/COALESCE to eliminate Append materialization cost (original: 20290 rows gathered).",
    "target_ir": "CTE_Q_S0_all_sales \u2192 sales_detail",
    "recommended_examples": [
      "pg_explicit_join_materialized"
    ]
  }
]