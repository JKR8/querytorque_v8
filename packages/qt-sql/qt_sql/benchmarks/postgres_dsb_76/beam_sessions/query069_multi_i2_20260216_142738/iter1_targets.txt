[
  {
    "target_id": "t1",
    "family": "E+B",
    "transform": "date_materialization_then_decorrelate",
    "relevance_score": 0.95,
    "hypothesis": "Materialize date filter to eliminate 3x date_dim scans. Decouple correlated subqueries via anti-joins to avoid per-row nested loops on large sales tables (164k/30k/71k rows).",
    "target_ir": "S0: Replace EXISTS/NOT EXISTS subqueries with LEFT JOIN anti-pattern using precomputed sales CTEs. Reuse date_filter CTE with original d_moy expression.",
    "recommended_examples": [
      "multi_dimension_prefetch",
      "pg_shared_scan_decorrelate"
    ]
  },
  {
    "target_id": "t2",
    "family": "A",
    "transform": "dimension_prefilter",
    "relevance_score": 0.9,
    "hypothesis": "Filter customer_address (9k rows) and customer_demographics early to reduce input into customer-ca join (166k \u2192 9k), preventing propagation of 180k unfiltered rows.",
    "target_ir": "S0: Wrap customer_address and customer_demographics in CTEs with original filters (ca_state IN, cd_marital_status IN). Anchor hash 5bc66d236b3490a1.",
    "recommended_examples": [
      "pg_date_cte_explicit_join"
    ]
  },
  {
    "target_id": "t3",
    "family": "E",
    "transform": "date_materialization_rescue",
    "relevance_score": 0.85,
    "hypothesis": "Fix literal mismatch in t2 by preserving d_moy expression verbatim. Reuse single date_filter CTE to avoid 3x date_dim scans (31 rows each).",
    "target_ir": "S0: Insert CTE for date_dim with original d_year/d_moy filters. Replace all date_dim references in subqueries with CTE.",
    "recommended_examples": [
      "date_materialization"
    ]
  },
  {
    "target_id": "t4",
    "family": "F",
    "transform": "explicit_join_optimize",
    "relevance_score": 0.8,
    "hypothesis": "Enforce optimal join order (customer_address \u2192 customer \u2192 demographics) via explicit INNER JOIN to reduce cross-join explosion (180k rows in Hash Join).",
    "target_ir": "S0: Convert comma joins to explicit INNER JOIN ordered by selectivity. Anchor table aliases.",
    "recommended_examples": [
      "pg_explicit_join_materialized"
    ]
  }
]