[
  {
    "target_id": "S0",
    "family": "A+C+F",
    "transform": "preagg_fact_with_early_filter_explicit_join",
    "relevance_score": 0.9,
    "hypothesis": "Pre-aggregate catalog_sales (C) after applying cs_wholesale_cost filter (A) and restructure joins explicitly (F) to reduce rows early and optimize join order, targeting the Nested Loop on catalog_sales (rows=12994).",
    "target_ir": "S0[SELECT] by_anchor_hash:1cd5a41ae76aa5a1 (WHERE clause)",
    "recommended_examples": [
      "pg_materialized_dimension_fact_prefilter",
      "pg_explicit_join_materialized"
    ]
  },
  {
    "target_id": "S0",
    "family": "C",
    "transform": "correct_preaggregate_cs",
    "relevance_score": 0.85,
    "hypothesis": "Fix t3's preaggregate by including SUM/COUNT aggregates in CTE and compute AVG in main query, reducing rows before joining (targeting Nested Loop rows=12994).",
    "target_ir": "S0[SELECT] MAIN_QUERY FROM catalog_sales (replace_with preagg CTE)",
    "recommended_examples": [
      "pg_materialized_dimension_fact_prefilter"
    ]
  },
  {
    "target_id": "S0",
    "family": "F+A",
    "transform": "explicit_join_order_filtered_dims_first",
    "relevance_score": 0.8,
    "hypothesis": "Restructure joins explicitly starting with filtered dimensions (customer_demographics, customer) to reduce rows early, targeting Nested Loop on customer (rows=0.025ms).",
    "target_ir": "S0[SELECT] MAIN_QUERY FROM clause (replace_with explicit JOINs)",
    "recommended_examples": [
      "pg_explicit_join_materialized",
      "pg_date_cte_explicit_join"
    ]
  },
  {
    "target_id": "S0",
    "family": "E",
    "transform": "prefetch_filtered_demographics_customer",
    "relevance_score": 0.75,
    "hypothesis": "Materialize filtered customer_demographics and customer-address joins to avoid repeated scans, targeting Index Scan on customer_demographics (time=0.047ms).",
    "target_ir": "S0[SELECT] by_anchor_hash:1cd5a41ae76aa5a1 (WHERE predicates on cd_gender/education)",
    "recommended_examples": [
      "multi_dimension_prefetch"
    ]
  }
]