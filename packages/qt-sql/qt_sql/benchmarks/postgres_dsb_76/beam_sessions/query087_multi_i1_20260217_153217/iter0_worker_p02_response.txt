{
  "probe_id": "p01",
  "transform_id": "shared_dimension_multi_channel",
  "family": "A",
  "dialect": "postgres",
  "hypothesis": "Extract shared customer filter into a CTE to eliminate redundant scans across store, catalog, and web sales channels.",
  "reasoning_trace": [
    "All three channels apply identical customer filter: c_birth_year BETWEEN 1955 AND 1961",
    "Each channel currently scans customer table independently",
    "Pre-materializing filtered customer set into CTE reduces total I/O and avoids repeated index lookups"
  ],
  "target_ir": "CTE cust_cte with filtered customer rows; each sales channel joins to cust_cte instead of scanning customer directly",
  "steps": [
    {
      "step_id": "s1",
      "op": "insert_cte",
      "target": {"by_node_id": "S0"},
      "payload": {
        "cte_name": "cust_cte",
        "cte_query_sql": "SELECT c_customer_sk, c_last_name, c_first_name FROM customer WHERE c_birth_year BETWEEN 1955 AND 1961"
      }
    }
  ]
}