{
  "iteration": 0,
  "n_api_calls": 18,
  "beam_cost_usd": 0.08267339,
  "beam_cost_priced_calls": 18,
  "beam_cost_unpriced_calls": 0,
  "beam_token_totals": {
    "prompt_tokens": 86221,
    "completion_tokens": 28098,
    "total_tokens": 114319,
    "prompt_cache_hit_tokens": 0,
    "prompt_cache_miss_tokens": 0,
    "cached_tokens": 30336
  },
  "best_speedup": 0.0,
  "best_patch_id": null,
  "best_sql": null,
  "patches": [
    {
      "patch_id": "p12",
      "family": "A",
      "transform": "shared_dimension_multi_channel",
      "relevance_score": 0.68,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_date_dim AS (SELECT d_date_sk FROM date_dim WHERE d_month_seq BETWEEN 1195 AND 1195 + 11) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store, item, (SELECT ss_store_sk, AVG(revenue) AS ave FROM (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales JOIN filtered_date_dim ON ss_sold_date_sk = d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sa GROUP BY ss_store_sk) AS sb, (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales JOIN filtered_date_dim ON ss_sold_date_sk = d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sc WHERE sb.ss_store_sk = sc.ss_store_sk AND sc.revenue <= 0.1 * sb.ave AND s_store_sk = sc.ss_store_sk AND i_item_sk = sc.ss_item_sk AND i_manager_id BETWEEN 80 AND 84 AND s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Create consolidated date_dim CTE reused across all sales subqueries"
    },
    {
      "patch_id": "p04",
      "family": "A",
      "transform": "early_filter",
      "relevance_score": 0.9,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_store_sales AS (SELECT ss_store_sk, ss_item_sk, ss_sales_price, ss_list_price FROM store_sales WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store, item, (SELECT ss_store_sk, AVG(revenue) AS ave FROM (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM filtered_store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 GROUP BY ss_store_sk, ss_item_sk) AS sa GROUP BY ss_store_sk) AS sb, (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM filtered_store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 GROUP BY ss_store_sk, ss_item_sk) AS sc WHERE sb.ss_store_sk = sc.ss_store_sk AND sc.revenue <= 0.1 * sb.ave AND s_store_sk = sc.ss_store_sk AND i_item_sk = sc.ss_item_sk AND i_manager_id BETWEEN 80 AND 84 AND s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Push ss_sales_price/ss_list_price ratio filter into base sales CTE WHERE clause"
    },
    {
      "patch_id": "p03",
      "family": "F",
      "transform": "date_cte_explicit_join",
      "relevance_score": 0.82,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_date AS (SELECT d_date_sk FROM date_dim WHERE d_month_seq BETWEEN 1195 AND 1195 + 11) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store JOIN item ON TRUE JOIN (SELECT ss_store_sk, AVG(revenue) AS ave FROM (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales AS ss JOIN filtered_date AS fd ON ss.ss_sold_date_sk = fd.d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sa GROUP BY ss_store_sk) AS sb ON TRUE JOIN (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales AS ss JOIN filtered_date AS fd ON ss.ss_sold_date_sk = fd.d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sc ON sb.ss_store_sk = sc.ss_store_sk WHERE sb.ss_store_sk = sc.ss_store_sk AND sc.revenue <= 0.1 * sb.ave AND s_store_sk = sc.ss_store_sk AND i_item_sk = sc.ss_item_sk AND i_manager_id BETWEEN 80 AND 84 AND s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Convert comma joins to explicit INNER JOINs between sales CTEs and filtered dimensions"
    },
    {
      "patch_id": "p08",
      "family": "C",
      "transform": "aggregate_pushdown",
      "relevance_score": 0.75,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH ss_agg AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store AS s JOIN item AS i ON TRUE JOIN (SELECT ss_store_sk, AVG(revenue) AS ave FROM ss_agg GROUP BY ss_store_sk) AS sb ON TRUE JOIN ss_agg AS sc ON sb.ss_store_sk = sc.ss_store_sk AND sc.revenue <= 0.1 * sb.ave WHERE s.s_store_sk = sc.ss_store_sk AND i.i_item_sk = sc.ss_item_sk AND i.i_manager_id BETWEEN 80 AND 84 AND s.s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Pre-aggregate store_sales at item/store level before joining with date_dim"
    },
    {
      "patch_id": "p11",
      "family": "B",
      "transform": "early_filter_decorrelate",
      "relevance_score": 0.8,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_store_sales AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk), store_averages AS (SELECT ss_store_sk, AVG(revenue) AS ave FROM filtered_store_sales GROUP BY ss_store_sk) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store AS s INNER JOIN item AS i ON i.i_item_sk = sc.ss_item_sk INNER JOIN filtered_store_sales AS sc ON s.s_store_sk = sc.ss_store_sk INNER JOIN store_averages AS sb ON sb.ss_store_sk = sc.ss_store_sk WHERE sc.revenue <= 0.1 * sb.ave AND i_manager_id BETWEEN 80 AND 84 AND s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Push store/item filters into CTE definitions despite lack of correlation"
    },
    {
      "patch_id": "p09",
      "family": "F",
      "transform": "inner_join_conversion",
      "relevance_score": 0.85,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store AS s INNER JOIN item AS i ON i.i_item_sk = sc.ss_item_sk INNER JOIN (SELECT ss_store_sk, AVG(revenue) AS ave FROM (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sa GROUP BY ss_store_sk) AS sb ON sb.ss_store_sk = sc.ss_store_sk INNER JOIN (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sc ON s.s_store_sk = sc.ss_store_sk WHERE sc.revenue <= 0.1 * sb.ave AND i_manager_id BETWEEN 80 AND 84 AND s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Convert implicit comma joins to explicit INNER JOIN syntax"
    },
    {
      "patch_id": "p02",
      "family": "F",
      "transform": "dimension_prefetch_star",
      "relevance_score": 0.88,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_store AS (SELECT s_store_sk, s_store_name FROM store WHERE s_state IN ('IA', 'IL', 'NC')), filtered_item AS (SELECT i_item_sk, i_item_desc, i_current_price, i_wholesale_cost, i_brand FROM item WHERE i_manager_id BETWEEN 80 AND 84) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM filtered_store AS fs JOIN filtered_item AS fi ON TRUE JOIN (SELECT ss_store_sk, AVG(revenue) AS ave FROM (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sa GROUP BY ss_store_sk) AS sb ON fs.s_store_sk = sb.ss_store_sk JOIN (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sc ON sb.ss_store_sk = sc.ss_store_sk AND sc.revenue <= 0.1 * sb.ave WHERE fs.s_store_sk = sc.ss_store_sk AND fi.i_item_sk = sc.ss_item_sk ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Create filtered_store and filtered_item CTEs with s_state/i_manager_id filters before main joins"
    },
    {
      "patch_id": "p01",
      "family": "E",
      "transform": "pg_self_join_decomposition",
      "relevance_score": 0.95,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH date_filter AS (SELECT d_date_sk FROM date_dim WHERE d_month_seq BETWEEN 1195 AND 1195 + 11), store_sales_revenue AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales JOIN date_filter AS d ON ss_sold_date_sk = d.d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk), store_avg_revenue AS (SELECT ss_store_sk, AVG(revenue) AS ave FROM store_sales_revenue GROUP BY ss_store_sk), filtered_store AS (SELECT * FROM store WHERE s_state IN ('IA', 'IL', 'NC')), filtered_item AS (SELECT * FROM item WHERE i_manager_id BETWEEN 80 AND 84) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM filtered_store AS s JOIN filtered_item AS i ON TRUE JOIN store_avg_revenue AS sb ON s.s_store_sk = sb.ss_store_sk JOIN store_sales_revenue AS sc ON sb.ss_store_sk = sc.ss_store_sk AND i.i_item_sk = sc.ss_item_sk WHERE sc.revenue <= 0.1 * sb.ave ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Replace sa/sb/sc subqueries with materialized CTE chain: 1) Base sales CTE with store/item/date filters and revenue sums 2) sb CTE computing avg(revenue) per store 3) sc CTE reusing base sales data"
    },
    {
      "patch_id": "p05",
      "family": "A",
      "transform": "date_cte_isolate",
      "relevance_score": 0.65,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_dates AS (SELECT d_date_sk FROM date_dim WHERE d_month_seq BETWEEN 1195 AND 1195 + 11) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store AS s JOIN item AS i ON TRUE JOIN (SELECT ss_store_sk, AVG(revenue) AS ave FROM (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales AS ss JOIN filtered_dates AS fd ON ss.ss_sold_date_sk = fd.d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sa GROUP BY ss_store_sk) AS sb ON TRUE JOIN (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales AS ss JOIN filtered_dates AS fd ON ss.ss_sold_date_sk = fd.d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) AS sc ON sb.ss_store_sk = sc.ss_store_sk WHERE sb.ss_store_sk = sc.ss_store_sk AND sc.revenue <= 0.1 * sb.ave AND s_store_sk = sc.ss_store_sk AND i_item_sk = sc.ss_item_sk AND i_manager_id BETWEEN 80 AND 84 AND s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Materialize date_dim filter into CTE before joining with store_sales"
    },
    {
      "patch_id": "p10",
      "family": "C",
      "transform": "single_pass_aggregation",
      "relevance_score": 0.5,
      "status": "FAIL",
      "speedup": null,
      "semantic_passed": false,
      "error": "Tier-1: COLUMN REF MISMATCH: Original columns missing from rewrite \u2014 ['ave']. The rewrite references different table columns.",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH ss_aggregated AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue, AVG(CASE WHEN 1 = 1 THEN ss_sales_price END) AS ave FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store AS s JOIN item AS i ON TRUE JOIN ss_aggregated AS sc ON s.s_store_sk = sc.ss_store_sk AND i.i_item_sk = sc.ss_item_sk WHERE sc.revenue <= 0.1 * (SELECT AVG(revenue) FROM ss_aggregated AS sa WHERE sa.ss_store_sk = sc.ss_store_sk) AND i.i_manager_id BETWEEN 80 AND 84 AND s.s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Combine sb/sc aggregates into single CTE using CASE statements"
    },
    {
      "patch_id": "p06",
      "family": "A",
      "transform": "prefetch_fact_join",
      "relevance_score": 0.55,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_date AS (SELECT d_date_sk FROM date_dim WHERE d_month_seq BETWEEN 1195 AND 1195 + 11), filtered_store_sales AS (SELECT ss_store_sk, ss_item_sk, ss_sales_price FROM store_sales WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store AS s JOIN item AS i ON TRUE JOIN (SELECT ss_store_sk, AVG(revenue) AS ave FROM (SELECT ss.ss_store_sk, ss.ss_item_sk, SUM(ss.ss_sales_price) AS revenue FROM filtered_store_sales AS ss JOIN filtered_date AS fd ON ss.ss_sold_date_sk = fd.d_date_sk GROUP BY ss.ss_store_sk, ss.ss_item_sk) AS sa GROUP BY ss_store_sk) AS sb ON sb.ss_store_sk = sc.ss_store_sk JOIN (SELECT ss.ss_store_sk, ss.ss_item_sk, SUM(ss.ss_sales_price) AS revenue FROM filtered_store_sales AS ss JOIN filtered_date AS fd ON ss.ss_sold_date_sk = fd.d_date_sk GROUP BY ss.ss_store_sk, ss.ss_item_sk) AS sc ON sb.ss_store_sk = sc.ss_store_sk WHERE sb.ss_store_sk = sc.ss_store_sk AND sc.revenue <= 0.1 * sb.ave AND s_store_sk = sc.ss_store_sk AND i_item_sk = sc.ss_item_sk AND i_manager_id BETWEEN 80 AND 84 AND s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Stage CTEs: 1) filtered_date 2) filtered_store_sales 3) joined with dimensions"
    },
    {
      "patch_id": "p07",
      "family": "E",
      "transform": "materialize_cte",
      "relevance_score": 0.6,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_store_sales AS (SELECT ss_store_sk, ss_item_sk, ss_sales_price FROM store_sales, date_dim WHERE ss_sold_date_sk = d_date_sk AND d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01), store_revenue AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM filtered_store_sales GROUP BY ss_store_sk, ss_item_sk), store_avg_revenue AS (SELECT ss_store_sk, AVG(revenue) AS ave FROM store_revenue GROUP BY ss_store_sk) SELECT s_store_name, i_item_desc, sc.revenue, i_current_price, i_wholesale_cost, i_brand FROM store AS s JOIN item AS i ON TRUE JOIN store_revenue AS sc ON s.s_store_sk = sc.ss_store_sk AND i.i_item_sk = sc.ss_item_sk JOIN store_avg_revenue AS sb ON sb.ss_store_sk = sc.ss_store_sk WHERE sc.revenue <= 0.1 * sb.ave AND i.i_manager_id BETWEEN 80 AND 84 AND s.s_state IN ('IA', 'IL', 'NC') ORDER BY s_store_name, i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": "Force MATERIALIZED keyword on base sales CTE to prevent inlining"
    },
    {
      "patch_id": "snipe_p1",
      "family": "?",
      "transform": "unknown",
      "relevance_score": 1.0,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH base_revenue AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales JOIN date_dim ON ss_sold_date_sk = d_date_sk WHERE d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk), store_avg_revenue AS (SELECT ss_store_sk, AVG(revenue) AS ave FROM base_revenue GROUP BY ss_store_sk), filtered_store AS (SELECT s_store_sk, s_store_name FROM store WHERE s_state IN ('IA', 'IL', 'NC')), filtered_item AS (SELECT i_item_sk, i_item_desc, i_current_price, i_wholesale_cost, i_brand FROM item WHERE i_manager_id BETWEEN 80 AND 84) SELECT s.s_store_name, i.i_item_desc, sc.revenue, i.i_current_price, i.i_wholesale_cost, i.i_brand FROM filtered_store AS s JOIN base_revenue AS sc ON s.s_store_sk = sc.ss_store_sk JOIN store_avg_revenue AS sb ON sc.ss_store_sk = sb.ss_store_sk JOIN filtered_item AS i ON sc.ss_item_sk = i.i_item_sk WHERE sc.revenue <= 0.1 * sb.ave ORDER BY s.s_store_name, i.i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": null
    },
    {
      "patch_id": "snipe_p2",
      "family": "?",
      "transform": "unknown",
      "relevance_score": 1.0,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH base_revenue AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales JOIN date_dim ON ss_sold_date_sk = d_date_sk WHERE d_month_seq BETWEEN 1195 AND 1195 + 11 AND ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk), sb AS (SELECT ss_store_sk, AVG(revenue) AS ave FROM base_revenue GROUP BY ss_store_sk), sc AS (SELECT ss_store_sk, ss_item_sk, revenue FROM base_revenue) SELECT s.s_store_name, i.i_item_desc, sc.revenue, i.i_current_price, i.i_wholesale_cost, i.i_brand FROM store AS s JOIN sc ON s.s_store_sk = sc.ss_store_sk JOIN sb ON sc.ss_store_sk = sb.ss_store_sk JOIN item AS i ON sc.ss_item_sk = i.i_item_sk WHERE sc.revenue <= 0.1 * sb.ave AND i.i_manager_id BETWEEN 80 AND 84 AND s.s_state IN ('IA', 'IL', 'NC') ORDER BY s.s_store_name, i.i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": null
    },
    {
      "patch_id": "snipe_p1",
      "family": "E",
      "transform": "pg_self_join_decomposition",
      "relevance_score": 1.0,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH date_filter AS (SELECT d_date_sk FROM date_dim WHERE d_month_seq BETWEEN 1195 AND 1195 + 11), store_sales_revenue AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales JOIN date_filter ON ss_sold_date_sk = d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk), store_avg_revenue AS (SELECT ss_store_sk, AVG(revenue) AS ave FROM store_sales_revenue GROUP BY ss_store_sk), filtered_store AS (SELECT s_store_sk, s_store_name FROM store WHERE s_state IN ('IA', 'IL', 'NC')), filtered_item AS (SELECT i_item_sk, i_item_desc, i_current_price, i_wholesale_cost, i_brand FROM item WHERE i_manager_id BETWEEN 80 AND 84) SELECT s.s_store_name, i.i_item_desc, sc.revenue, i.i_current_price, i.i_wholesale_cost, i.i_brand FROM filtered_store AS s JOIN store_avg_revenue AS sb ON s.s_store_sk = sb.ss_store_sk JOIN store_sales_revenue AS sc ON sb.ss_store_sk = sc.ss_store_sk JOIN filtered_item AS i ON i.i_item_sk = sc.ss_item_sk WHERE sc.revenue <= 0.1 * sb.ave ORDER BY s.s_store_name, i.i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": null
    },
    {
      "patch_id": "snipe_p2",
      "family": "F",
      "transform": "dimension_prefetch_explicit_join",
      "relevance_score": 1.0,
      "status": "ERROR",
      "speedup": null,
      "semantic_passed": false,
      "error": "Synthetic semantic check failed: SyntheticDataGenerator._generate_value() got an unexpected keyword argument 'row_context'",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_date AS (SELECT d_date_sk FROM date_dim WHERE d_month_seq BETWEEN 1195 AND 1195 + 11), filtered_store AS (SELECT s_store_sk, s_store_name FROM store WHERE s_state IN ('IA', 'IL', 'NC')), filtered_item AS (SELECT i_item_sk, i_item_desc, i_current_price, i_wholesale_cost, i_brand FROM item WHERE i_manager_id BETWEEN 80 AND 84), base_sales AS (SELECT ss_store_sk, ss_item_sk, SUM(ss_sales_price) AS revenue FROM store_sales JOIN filtered_date ON ss_sold_date_sk = d_date_sk WHERE ss_sales_price / ss_list_price BETWEEN 38 * 0.01 AND 48 * 0.01 GROUP BY ss_store_sk, ss_item_sk) SELECT s.s_store_name, i.i_item_desc, sc.revenue, i.i_current_price, i.i_wholesale_cost, i.i_brand FROM filtered_store AS s INNER JOIN (SELECT ss_store_sk, AVG(revenue) AS ave FROM base_sales GROUP BY ss_store_sk) AS sb ON s.s_store_sk = sb.ss_store_sk INNER JOIN base_sales AS sc ON sb.ss_store_sk = sc.ss_store_sk INNER JOIN filtered_item AS i ON i.i_item_sk = sc.ss_item_sk WHERE sc.revenue <= 0.1 * sb.ave ORDER BY s.s_store_name, i.i_item_desc LIMIT 100;",
      "has_explain": false,
      "description": null
    }
  ],
  "explains": {}
}