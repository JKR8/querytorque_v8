{
  "iteration": 0,
  "n_api_calls": 5,
  "best_speedup": 0.0,
  "best_patch_id": null,
  "best_sql": null,
  "patches": [
    {
      "patch_id": "t1",
      "family": "E",
      "transform": "multi_dimension_prefetch",
      "relevance_score": 0.95,
      "status": "REGRESSION",
      "speedup": 0.59,
      "semantic_passed": true,
      "error": null,
      "original_ms": 956.2,
      "patch_ms": 1629.6,
      "output_sql": "WITH filtered_date AS (SELECT * FROM date_dim WHERE d_month_seq BETWEEN 1214 AND 1214 + 11), filtered_customer AS (SELECT * FROM customer WHERE c_birth_year BETWEEN 1955 AND 1961) SELECT COUNT(*) FROM ((SELECT DISTINCT c_last_name, c_first_name, d_date FROM store_sales INNER JOIN filtered_date ON store_sales.ss_sold_date_sk = filtered_date.d_date_sk INNER JOIN filtered_customer ON store_sales.ss_customer_sk = filtered_customer.c_customer_sk WHERE ss_list_price BETWEEN 242 AND 271 AND ss_wholesale_cost BETWEEN 35 AND 45) EXCEPT (SELECT DISTINCT c_last_name, c_first_name, d_date FROM catalog_sales INNER JOIN filtered_date ON catalog_sales.cs_sold_date_sk = filtered_date.d_date_sk INNER JOIN filtered_customer ON catalog_sales.cs_bill_customer_sk = filtered_customer.c_customer_sk WHERE cs_list_price BETWEEN 242 AND 271 AND cs_wholesale_cost BETWEEN 35 AND 45) EXCEPT (SELECT DISTINCT c_last_name, c_first_name, d_date FROM web_sales INNER JOIN filtered_date ON web_sales.ws_sold_date_sk = filtered_date.d_date_sk INNER JOIN filtered_customer ON web_sales.ws_bill_customer_sk = filtered_customer.c_customer_sk WHERE ws_list_price BETWEEN 242 AND 271 AND ws_wholesale_cost BETWEEN 35 AND 45)) AS cool_cust;",
      "has_explain": true
    },
    {
      "patch_id": "t2",
      "family": "D",
      "transform": "intersect_to_exists",
      "relevance_score": 0.85,
      "status": "FAIL",
      "speedup": null,
      "semantic_passed": false,
      "error": "Equivalence execution error: missing FROM-clause entry for table \"d\"\nLINE 1: ...OM catalog_sales AS cs WHERE cs.cs_sold_date_sk = d.d_date_s...\n                                                             ^\n",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH store_sales_base AS (SELECT DISTINCT c.c_last_name, c.c_first_name, d.d_date FROM store_sales AS ss INNER JOIN date_dim AS d ON ss.ss_sold_date_sk = d.d_date_sk INNER JOIN customer AS c ON ss.ss_customer_sk = c.c_customer_sk WHERE d.d_month_seq BETWEEN 1214 AND 1214 + 11 AND ss.ss_list_price BETWEEN 242 AND 271 AND c.c_birth_year BETWEEN 1955 AND 1961 AND ss.ss_wholesale_cost BETWEEN 35 AND 45), catalog_sales_check AS (SELECT 1 FROM catalog_sales AS cs WHERE cs.cs_sold_date_sk = d.d_date_sk AND cs.cs_bill_customer_sk = c.c_customer_sk AND cs.cs_list_price BETWEEN 242 AND 271 AND cs.cs_wholesale_cost BETWEEN 35 AND 45), web_sales_check AS (SELECT 1 FROM web_sales AS ws WHERE ws.ws_sold_date_sk = d.d_date_sk AND ws.ws_bill_customer_sk = c.c_customer_sk AND ws.ws_list_price BETWEEN 242 AND 271 AND ws.ws_wholesale_cost BETWEEN 35 AND 45) SELECT COUNT(*) FROM (SELECT DISTINCT c_last_name, c_first_name, d_date FROM store_sales_base AS ssb INNER JOIN date_dim AS d ON TRUE INNER JOIN customer AS c ON TRUE WHERE NOT EXISTS(SELECT 1 FROM catalog_sales_check) AND NOT EXISTS(SELECT 1 FROM web_sales_check)) AS cool_cust;",
      "has_explain": false
    },
    {
      "patch_id": "t3",
      "family": "C",
      "transform": "distinct_pushdown",
      "relevance_score": 0.75,
      "status": "FAIL",
      "speedup": null,
      "semantic_passed": false,
      "error": "Equivalence execution error: current transaction is aborted, commands ignored until end of transaction block\n",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH agg_store_sales AS (SELECT ss_customer_sk, ss_sold_date_sk FROM store_sales WHERE ss_list_price BETWEEN 242 AND 271 AND ss_wholesale_cost BETWEEN 35 AND 45 GROUP BY ss_customer_sk, ss_sold_date_sk), agg_catalog_sales AS (SELECT cs_bill_customer_sk, cs_sold_date_sk FROM catalog_sales WHERE cs_list_price BETWEEN 242 AND 271 AND cs_wholesale_cost BETWEEN 35 AND 45 GROUP BY cs_bill_customer_sk, cs_sold_date_sk), agg_web_sales AS (SELECT ws_bill_customer_sk, ws_sold_date_sk FROM web_sales WHERE ws_list_price BETWEEN 242 AND 271 AND ws_wholesale_cost BETWEEN 35 AND 45 GROUP BY ws_bill_customer_sk, ws_sold_date_sk) SELECT COUNT(*) FROM ((SELECT DISTINCT c_last_name, c_first_name, d_date FROM agg_store_sales INNER JOIN date_dim ON agg_store_sales.ss_sold_date_sk = date_dim.d_date_sk INNER JOIN customer ON agg_store_sales.ss_customer_sk = customer.c_customer_sk WHERE d_month_seq BETWEEN 1214 AND 1214 + 11 AND c_birth_year BETWEEN 1955 AND 1961) EXCEPT (SELECT DISTINCT c_last_name, c_first_name, d_date FROM agg_catalog_sales INNER JOIN date_dim ON agg_catalog_sales.cs_sold_date_sk = date_dim.d_date_sk INNER JOIN customer ON agg_catalog_sales.cs_bill_customer_sk = customer.c_customer_sk WHERE d_month_seq BETWEEN 1214 AND 1214 + 11 AND c_birth_year BETWEEN 1955 AND 1961) EXCEPT (SELECT DISTINCT c_last_name, c_first_name, d_date FROM agg_web_sales INNER JOIN date_dim ON agg_web_sales.ws_sold_date_sk = date_dim.d_date_sk INNER JOIN customer ON agg_web_sales.ws_bill_customer_sk = customer.c_customer_sk WHERE d_month_seq BETWEEN 1214 AND 1214 + 11 AND c_birth_year BETWEEN 1955 AND 1961)) AS cool_cust;",
      "has_explain": false
    },
    {
      "patch_id": "syn_w3",
      "family": "E",
      "transform": "materialize_cte",
      "relevance_score": 0.3,
      "status": "FAIL",
      "speedup": null,
      "semantic_passed": false,
      "error": "Equivalence execution error: current transaction is aborted, commands ignored until end of transaction block\n",
      "original_ms": null,
      "patch_ms": null,
      "output_sql": "WITH filtered_date AS (SELECT * FROM date_dim WHERE d_month_seq BETWEEN 1214 AND 1214 + 11), filtered_customer AS (SELECT * FROM customer WHERE c_birth_year BETWEEN 1955 AND 1961) SELECT COUNT(*) FROM ((SELECT DISTINCT c_last_name, c_first_name, d_date FROM store_sales INNER JOIN filtered_date ON store_sales.ss_sold_date_sk = filtered_date.d_date_sk INNER JOIN filtered_customer ON store_sales.ss_customer_sk = filtered_customer.c_customer_sk WHERE ss_list_price BETWEEN 242 AND 271 AND ss_wholesale_cost BETWEEN 35 AND 45) EXCEPT (SELECT DISTINCT c_last_name, c_first_name, d_date FROM catalog_sales INNER JOIN filtered_date ON catalog_sales.cs_sold_date_sk = filtered_date.d_date_sk INNER JOIN filtered_customer ON catalog_sales.cs_bill_customer_sk = filtered_customer.c_customer_sk WHERE cs_list_price BETWEEN 242 AND 271 AND cs_wholesale_cost BETWEEN 35 AND 45) EXCEPT (SELECT DISTINCT c_last_name, c_first_name, d_date FROM web_sales INNER JOIN filtered_date ON web_sales.ws_sold_date_sk = filtered_date.d_date_sk INNER JOIN filtered_customer ON web_sales.ws_bill_customer_sk = filtered_customer.c_customer_sk WHERE ws_list_price BETWEEN 242 AND 271 AND ws_wholesale_cost BETWEEN 35 AND 45)) AS cool_cust;",
      "has_explain": false
    }
  ],
  "explains": {
    "t1": "Aggregate  (rows=1, time=2080.569)\n  Index Scan on date_dim  (rows=365, time=0.917)\n  Seq Scan on customer  (rows=47740, time=82.5)\n  Subquery Scan (cool_cust)  (rows=0, time=2080.562)\n    SetOp  (rows=0, time=2080.56)\n      Append  (rows=0, time=2080.46)\n        Result  (rows=0, time=1722.298)\n          SetOp  (rows=0, time=1722.295)\n            Append  (rows=0, time=1722.167)\n              Subquery Scan (*SELECT* 1)  (rows=0, time=1072.224)\n                Unique  (rows=0, time=1072.222)\n     "
  }
}