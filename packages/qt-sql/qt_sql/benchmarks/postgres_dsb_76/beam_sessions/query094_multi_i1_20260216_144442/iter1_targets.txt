[
  {
    "target_id": "t1",
    "family": "B+A",
    "transform": "decorrelate_exists_prefilter_returns",
    "relevance_score": 0.98,
    "hypothesis": "Replace correlated EXISTS with a CTE for multi-warehouse orders (B) and prefilter web_returns for NOT EXISTS (A). This eliminates the expensive Hash Join (221.796 ms) on 50k rows by reducing anti-join input to only relevant orders.",
    "target_ir": "S0",
    "recommended_examples": [
      "pg_shared_scan_decorrelate",
      "pg_date_cte_explicit_join"
    ]
  },
  {
    "target_id": "t2",
    "family": "F",
    "transform": "explicit_join_dimensions_first",
    "relevance_score": 0.85,
    "hypothesis": "Restructure joins to filter date_dim, customer_address, and web_site BEFORE web_sales. Reduces input to the costly Nested Loop (130.779 ms) by pushing filters early.",
    "target_ir": "S0",
    "recommended_examples": [
      "pg_explicit_join_materialized"
    ]
  },
  {
    "target_id": "t3",
    "family": "B",
    "transform": "decorrelate_exists_fixed_ambiguity",
    "relevance_score": 0.9,
    "hypothesis": "Reimplement decorrelation from t1 with explicit column aliases to resolve ambiguity errors. Targets the Index Only Scan (0.126 ms) by replacing per-row execution with a single CTE scan.",
    "target_ir": "S0",
    "recommended_examples": [
      "pg_shared_scan_decorrelate"
    ]
  },
  {
    "target_id": "t4",
    "family": "A",
    "transform": "prefiltered_returns_cte",
    "relevance_score": 0.8,
    "hypothesis": "Isolate NOT EXISTS logic into a CTE prefiltering web_returns for wr_reason_sk IN (7,25,26,52,69). Shrinks the anti-join source from 50k rows (current Hash) to a minimal set.",
    "target_ir": "S0",
    "recommended_examples": [
      "pg_date_cte_explicit_join"
    ]
  }
]