[
  {
    "plan_id": "compile_p1",
    "dialect": "postgres",
    "confidence": 1.0,
    "based_on": "",
    "strategy": "No change; original query.",
    "hypothesis": "All probes either regressed or failed equivalence. Insufficient evidence for a safe, improving rewrite. Original plan uses BitmapOr for OR predicates (PostgreSQL strength); any structural change risks regression.",
    "expected_explain_delta": "None; keep original plan.",
    "target_ir": "original",
    "tree": {
      "root_node_id": "final_select",
      "nodes": [
        {
          "node_id": "final_select",
          "parent_node_id": null,
          "sources": [],
          "outputs": [
            "MIN(ss_quantity)",
            "MIN(ss_ext_sales_price)",
            "MIN(ss_ext_wholesale_cost)",
            "MIN(ss_ext_wholesale_cost)"
          ],
          "changed": false
        }
      ]
    }
  },
  {
    "plan_id": "compile_p2",
    "dialect": "postgres",
    "confidence": 0.4,
    "based_on": "",
    "strategy": "Convert comma joins to explicit INNER JOINs; keep OR predicates intact.",
    "hypothesis": "Explicit join syntax may improve join-order flexibility for PostgreSQL's optimizer while preserving BitmapOr for OR predicates. Minimal change reduces semantic risk.",
    "expected_explain_delta": "Same join order and BitmapOr; explicit JOIN ON clauses may improve predicate association.",
    "target_ir": "Convert implicit joins to explicit JOINs.",
    "tree": {
      "root_node_id": "final_select",
      "nodes": [
        {
          "node_id": "final_select",
          "parent_node_id": null,
          "sources": [],
          "outputs": [
            "MIN(ss_quantity)",
            "MIN(ss_ext_sales_price)",
            "MIN(ss_ext_wholesale_cost)",
            "MIN(ss_ext_wholesale_cost)"
          ],
          "changed": true,
          "sql": "SELECT MIN(ss_quantity),\n       MIN(ss_ext_sales_price),\n       MIN(ss_ext_wholesale_cost),\n       MIN(ss_ext_wholesale_cost)\nFROM store_sales\nINNER JOIN store ON s_store_sk = ss_store_sk\nINNER JOIN customer_demographics ON cd_demo_sk = ss_cdemo_sk\nINNER JOIN household_demographics ON ss_hdemo_sk = hd_demo_sk\nINNER JOIN customer_address ON ss_addr_sk = ca_address_sk\nINNER JOIN date_dim ON ss_sold_date_sk = d_date_sk\nWHERE d_year = 2001\n  AND (\n    (cd_marital_status = 'M'\n     AND cd_education_status = '2 yr Degree'\n     AND ss_sales_price BETWEEN 100.00 AND 150.00\n     AND hd_dep_count = 3)\n    OR\n    (cd_marital_status = 'S'\n     AND cd_education_status = 'Primary'\n     AND ss_sales_price BETWEEN 50.00 AND 100.00\n     AND hd_dep_count = 1)\n    OR\n    (cd_marital_status = 'W'\n     AND cd_education_status = 'Primary'\n     AND ss_sales_price BETWEEN 150.00 AND 200.00\n     AND hd_dep_count = 1)\n  )\n  AND (\n    (ca_country = 'United States'\n     AND ca_state IN ('GA', 'KY', 'SD')\n     AND ss_net_profit BETWEEN 100 AND 200)\n    OR\n    (ca_country = 'United States'\n     AND ca_state IN ('AR', 'IN', 'VA')\n     AND ss_net_profit BETWEEN 150 AND 300)\n    OR\n    (ca_country = 'United States'\n     AND ca_state IN ('KS', 'OH', 'SD')\n     AND ss_net_profit BETWEEN 50 AND 250)\n  )"
        }
      ]
    }
  }
]