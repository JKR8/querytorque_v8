[
  {
    "target_id": "S0:03014fca41c49153",
    "family": "A+F",
    "transform": "explicit_join_order_push_date_filter",
    "relevance_score": 0.9,
    "hypothesis": "Original plan starts with date_dim (122 rows filtered) but joins web_sales via Nested Loop (85 rows/join). Push date filter into CTE and reorder joins to process web_returns early after date constraint. Use explicit INNER JOIN order to enforce predicate pushdown.",
    "target_ir": "MAIN QUERY FROM clause",
    "recommended_examples": [
      "pg_explicit_join_materialized",
      "pg_date_cte_explicit_join"
    ]
  },
  {
    "target_id": "S0",
    "family": "C",
    "transform": "web_returns_preagg_correct_cols",
    "relevance_score": 0.8,
    "hypothesis": "Original plan aggregates after all joins (Aggregate rows=16). Push AVG(wr_refunded_cash), AVG(wr_fee) to web_returns GROUP BY wr_item_sk, wr_order_number. Fix t4's column mismatch by preserving wr_refunded_cdemo_sk, wr_returning_cdemo_sk, wr_refunded_addr_sk, wr_reason_sk in CTE.",
    "target_ir": "GROUP BY clause & web_returns scan",
    "recommended_examples": [
      "pg_materialized_dimension_fact_prefilter"
    ]
  },
  {
    "target_id": "S0",
    "family": "E",
    "transform": "cd1_cd2_prefilter_shared_scan",
    "relevance_score": 0.75,
    "hypothesis": "Original plan does 2 Index Scans on customer_demographics (cd1 0 rows/time, cd2 1 row/time). Materialize filtered cd1/cd2 (marital_status + education_status) once via CTE with OR predicates, then reuse for both joins to wr_refunded_cdemo_sk and wr_returning_cdemo_sk.",
    "target_ir": "WHERE clause cd1/cd2 conditions",
    "recommended_examples": [
      "multi_dimension_prefetch"
    ]
  },
  {
    "target_id": "S0:03014fca41c49153",
    "family": "F+B",
    "transform": "web_sales_web_returns_hash_join_decorr",
    "relevance_score": 0.7,
    "hypothesis": "Original Nested Loop between web_sales (85 rows) and web_returns (0 rows/time) suggests implicit correlation. Force hash join by isolating web_sales filtered set first (date + sales_price/state filters), then bulk join with web_returns.",
    "target_ir": "web_sales \u2194 web_returns join",
    "recommended_examples": [
      "pg_shared_scan_decorrelate",
      "pg_explicit_join_materialized"
    ]
  }
]