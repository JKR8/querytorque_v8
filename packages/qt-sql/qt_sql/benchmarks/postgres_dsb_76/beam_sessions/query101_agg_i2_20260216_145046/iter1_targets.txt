[
  {
    "target_id": "S0",
    "family": "A+E",
    "transform": "early_filter_with_date_prefetch",
    "relevance_score": 0.9,
    "hypothesis": "Pushing dimension filters (item, customer_address, household_demographics) into CTEs reduces rows before expensive joins. Prefetching d1/d2 date ranges via a CTE avoids redundant scans of date_dim.",
    "target_ir": "Use insert_cte to create filtered_item, filtered_ca, filtered_hd, and d1_d2_range CTEs. Replace original FROM clause with explicit joins on these CTEs, ensuring d_date_sk aliases are unambiguous.",
    "recommended_examples": [
      "pg_date_cte_explicit_join",
      "multi_dimension_prefetch"
    ]
  },
  {
    "target_id": "S0:f2ece665ad1a915f",
    "family": "F",
    "transform": "explicit_join_literal_fix",
    "relevance_score": 0.85,
    "hypothesis": "Restructuring implicit joins to explicit INNER JOINs improves join order. Fix prior t1's literal mismatch by preserving 76*0.01/96*0.01 filters.",
    "target_ir": "Replace comma joins with explicit INNER JOINs (store_sales \u21e2 store_returns \u21e2 item \u21e2 ...), anchoring ss_sales_price/ss_list_price ratio to original expression.",
    "recommended_examples": [
      "pg_explicit_join_materialized"
    ]
  },
  {
    "target_id": "S0",
    "family": "E",
    "transform": "date_dim_prefetch_aliased",
    "relevance_score": 0.8,
    "hypothesis": "Resolve t3's ambiguous d_date_sk by fully qualifying CTE columns (d1_cte.d_date_sk). Prefetch d2 dates linked to d1 reduces nested loop cost.",
    "target_ir": "Insert d1_cte AS (SELECT ... FROM date_dim) and d2_range CTE with explicit d1_cte.d_date reference. Replace original d1/d2 joins with CTE-based joins.",
    "recommended_examples": [
      "date_dim_prefetch"
    ]
  },
  {
    "target_id": "S0",
    "family": "C",
    "transform": "early_customer_aggregation",
    "relevance_score": 0.7,
    "hypothesis": "Aggregate customer counts early if web_sales/store_returns joins preserve cardinality. Target the 1167596-row Nested Loop (original plan) by reducing rows before joining.",
    "target_ir": "Wrap store_sales + store_returns + item in a subquery with GROUP BY ss_customer_sk, then join result to web_sales/customer/etc.",
    "recommended_examples": [
      "pg_materialized_dimension_fact_prefilter"
    ]
  }
]