{
  "iteration": 2,
  "n_api_calls": 3,
  "best_speedup": 0.0,
  "best_patch_id": null,
  "best_sql": null,
  "patches": [
    {
      "patch_id": "t1",
      "family": "A+E",
      "transform": "push_date_filters_and_prefilter_dimensions",
      "relevance_score": 0.98,
      "status": "REGRESSION",
      "speedup": 0.26,
      "semantic_passed": true,
      "error": null,
      "original_ms": 76.8,
      "patch_ms": 299.2,
      "output_sql": "WITH filtered_item AS (SELECT i_item_sk FROM item WHERE i_color IN ('navajo', 'orchid') AND i_manager_id BETWEEN 8 AND 27), filtered_address AS (SELECT ca_address_sk, ca_county FROM customer_address WHERE ca_state IN ('IA', 'IL')), ss AS (SELECT ca_county, d_qoy, d_year, SUM(ss_ext_sales_price) AS store_sales FROM store_sales, date_dim, customer_address, item WHERE ss_sold_date_sk = d_date_sk AND ss_addr_sk = ca_address_sk AND ss_item_sk = i_item_sk AND i_item_sk IN (SELECT i_item_sk FROM filtered_item) AND ca_address_sk IN (SELECT ca_address_sk FROM filtered_address) AND d_year = 1998 AND d_qoy IN (1, 2, 3) AND ss_list_price BETWEEN 86 AND 100 GROUP BY ca_county, d_qoy, d_year), ws AS (SELECT ca_county, d_qoy, d_year, SUM(ws_ext_sales_price) AS web_sales FROM web_sales, date_dim, customer_address, item WHERE ws_sold_date_sk = d_date_sk AND ws_bill_addr_sk = ca_address_sk AND ws_item_sk = i_item_sk AND i_item_sk IN (SELECT i_item_sk FROM filtered_item) AND ca_address_sk IN (SELECT ca_address_sk FROM filtered_address) AND d_year = 1998 AND d_qoy IN (1, 2, 3) AND ws_list_price BETWEEN 86 AND 100 GROUP BY ca_county, d_qoy, d_year) SELECT ss1.ca_county, ss1.d_year, ws2.web_sales / ws1.web_sales AS web_q1_q2_increase, ss2.store_sales / ss1.store_sales AS store_q1_q2_increase, ws3.web_sales / ws2.web_sales AS web_q2_q3_increase, ss3.store_sales / ss2.store_sales AS store_q2_q3_increase FROM ss AS ss1, ss AS ss2, ss AS ss3, ws AS ws1, ws AS ws2, ws AS ws3 WHERE ss1.d_qoy = 1 AND ss1.d_year = 1998 AND ss1.ca_county = ss2.ca_county AND ss2.d_qoy = 2 AND ss2.d_year = 1998 AND ss2.ca_county = ss3.ca_county AND ss3.d_qoy = 3 AND ss3.d_year = 1998 AND ss1.ca_county = ws1.ca_county AND ws1.d_qoy = 1 AND ws1.d_year = 1998 AND ws1.ca_county = ws2.ca_county AND ws2.d_qoy = 2 AND ws2.d_year = 1998 AND ws1.ca_county = ws3.ca_county AND ws3.d_qoy = 3 AND ws3.d_year = 1998 AND CASE WHEN ws1.web_sales > 0 THEN ws2.web_sales / ws1.web_sales ELSE NULL END > CASE WHEN ss1.store_sales > 0 THEN ss2.store_sales / ss1.store_sales ELSE NULL END AND CASE WHEN ws2.web_sales > 0 THEN ws3.web_sales / ws2.web_sales ELSE NULL END > CASE WHEN ss2.store_sales > 0 THEN ss3.store_sales / ss2.store_sales ELSE NULL END ORDER BY ss1.d_year;",
      "has_explain": true
    }
  ],
  "explains": {
    "t1": "Nested Loop  (rows=0, time=331.836)\n  Bitmap Heap Scan on item  (rows=268, time=5.206)\n    Bitmap Index Scan  (rows=1386, time=0.175)\n  Seq Scan on customer_address  (rows=15493, time=26.766)\n  Aggregate  (rows=21, time=331.806)\n    Sort  (rows=24, time=331.791)\n      Nested Loop  (rows=24, time=331.728)\n        Nested Loop  (rows=24, time=331.535)\n          Hash Join  (rows=24, time=331.188)\n            Hash Join  (rows=431, time=296.201)\n              Gather  (rows=303025, time=277.058)\n      "
  }
}