[
  {
    "target_id": "t1_rescue",
    "family": "B+F",
    "transform": "decorrelate_fix_self_join_elimination",
    "relevance_score": 0.98,
    "hypothesis": "Fix the relation reference error in the prior B+F patch to successfully eliminate the self-join through single-pass aggregation, avoiding duplicate scans of the CTE.",
    "target_ir": "S0: Replace CTE_Q_S0_inv with filtered_inventory/monthly_stats/valid_covariance CTEs. Replace Q_S0 with valid_covariance self-join elimination. S1: Apply identical structure with cov>1.5 filter.",
    "recommended_examples": [
      "pg_shared_scan_decorrelate",
      "pg_explicit_join_materialized"
    ]
  },
  {
    "target_id": "t2_combined",
    "family": "A+B+F",
    "transform": "early_filter_decorrelate_self_join",
    "relevance_score": 0.95,
    "hypothesis": "Add early dimension table filtering to the rescued B+F pipeline to reduce input rows before aggregation and join. Targets the large fact-dimension join.",
    "target_ir": "S0: Insert filtered_item/filtered_warehouse CTEs before filtered_inventory. Anchor: ceb681f4fee117f7. Propagate filters to inventory join.",
    "recommended_examples": [
      "pg_date_cte_explicit_join",
      "pg_shared_scan_decorrelate"
    ]
  },
  {
    "target_id": "t3_novel",
    "family": "F",
    "transform": "window_self_join_elimination",
    "relevance_score": 0.9,
    "hypothesis": "Replace self-join with LAG window function to compute consecutive month metrics in a single CTE scan. Eliminates join operator entirely.",
    "target_ir": "S0: Replace Q_S0 with LAG(stdev,1) OVER(PARTITION BY w_warehouse_sk,i_item_sk ORDER BY d_moy) in inv CTE. Anchor: 7c17a3840cbbb8b9.",
    "recommended_examples": []
  },
  {
    "target_id": "t4_materialize",
    "family": "E",
    "transform": "cte_materialization_fallback",
    "relevance_score": 0.85,
    "hypothesis": "Materialize the inv CTE as last-resort optimization to prevent recomputation during self-join when other transforms fail.",
    "target_ir": "S0: Insert MATERIALIZED keyword in CTE_Q_S0_inv definition. Anchor: CTE_Q_S0_inv.",
    "recommended_examples": [
      "multi_dimension_prefetch"
    ]
  }
]