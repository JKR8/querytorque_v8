{
  "iteration": 1,
  "n_api_calls": 5,
  "best_speedup": 0.0,
  "best_patch_id": null,
  "best_sql": null,
  "patches": [
    {
      "patch_id": "S0",
      "family": "B+E",
      "transform": "decorrelate_with_prefetch",
      "relevance_score": 0.95,
      "status": "NEUTRAL",
      "speedup": 0.99,
      "semantic_passed": true,
      "error": null,
      "original_ms": 875.6,
      "patch_ms": 881.2,
      "output_sql": "WITH filtered_dates AS (SELECT d_date_sk FROM date_dim WHERE d_year = 1999 AND d_moy BETWEEN 5 AND 5 + 3), filtered_items AS (SELECT i_item_sk FROM item WHERE i_category IN ('Children', 'Home', 'Women') AND i_manager_id BETWEEN 91 AND 100), valid_store_sales AS (SELECT DISTINCT ss_customer_sk FROM store_sales JOIN filtered_dates ON ss_sold_date_sk = d_date_sk JOIN filtered_items ON ss_item_sk = i_item_sk WHERE ss_sales_price / ss_list_price BETWEEN 65 * 0.01 AND 75 * 0.01), valid_web_or_catalog_sales AS (SELECT DISTINCT ws_bill_customer_sk AS customer_sk FROM web_sales JOIN filtered_dates ON ws_sold_date_sk = d_date_sk JOIN filtered_items ON ws_item_sk = i_item_sk WHERE ws_sales_price / ws_list_price BETWEEN 65 * 0.01 AND 75 * 0.01 UNION SELECT DISTINCT cs_ship_customer_sk AS customer_sk FROM catalog_sales JOIN filtered_dates ON cs_sold_date_sk = d_date_sk JOIN filtered_items ON cs_item_sk = i_item_sk WHERE cs_sales_price / cs_list_price BETWEEN 65 * 0.01 AND 75 * 0.01) SELECT cd_gender, cd_marital_status, cd_education_status, COUNT(*) AS cnt1, cd_purchase_estimate, COUNT(*) AS cnt2, cd_credit_rating, COUNT(*) AS cnt3, cd_dep_count, COUNT(*) AS cnt4, cd_dep_employed_count, COUNT(*) AS cnt5, cd_dep_college_count, COUNT(*) AS cnt6 FROM customer AS c, customer_address AS ca, customer_demographics WHERE c.c_current_addr_sk = ca.ca_address_sk AND ca_county IN ('Alameda County', 'Lexington city', 'Pender County', 'Petroleum County', 'Walworth County') AND c.c_birth_month IN (4, 5) AND cd_demo_sk = c.c_current_cdemo_sk AND cd_marital_status IN ('U', 'S', 'U') AND cd_education_status IN ('College', 'Secondary', 'College') AND cd_gender = 'M' AND EXISTS(SELECT 1 FROM valid_store_sales AS vss WHERE vss.ss_customer_sk = c.c_customer_sk) AND (EXISTS(SELECT 1 FROM valid_web_or_catalog_sales AS vwcs WHERE vwcs.customer_sk = c.c_customer_sk)) GROUP BY cd_gender, cd_marital_status, cd_education_status, cd_purchase_estimate, cd_credit_rating, cd_dep_count, cd_dep_employed_count, cd_dep_college_count ORDER BY cd_gender, cd_marital_status, cd_education_status, cd_purchase_estimate, cd_credit_rating, cd_dep_count, cd_dep_employed_count, cd_dep_college_count LIMIT 100;",
      "has_explain": true
    },
    {
      "patch_id": "S0",
      "family": "B+E",
      "transform": "decorrelate_with_prefetch",
      "relevance_score": 0.95,
      "status": "NEUTRAL",
      "speedup": 0.99,
      "semantic_passed": true,
      "error": null,
      "original_ms": 875.6,
      "patch_ms": 881.2,
      "output_sql": "WITH filtered_dates AS (SELECT d_date_sk FROM date_dim WHERE d_year = 1999 AND d_moy BETWEEN 5 AND 5 + 3), filtered_items AS (SELECT i_item_sk FROM item WHERE i_category IN ('Children', 'Home', 'Women') AND i_manager_id BETWEEN 91 AND 100), valid_store_sales AS (SELECT DISTINCT ss_customer_sk FROM store_sales JOIN filtered_dates ON ss_sold_date_sk = d_date_sk JOIN filtered_items ON ss_item_sk = i_item_sk WHERE ss_sales_price / ss_list_price BETWEEN 65 * 0.01 AND 75 * 0.01), valid_web_or_catalog_sales AS (SELECT DISTINCT ws_bill_customer_sk AS customer_sk FROM web_sales JOIN filtered_dates ON ws_sold_date_sk = d_date_sk JOIN filtered_items ON ws_item_sk = i_item_sk WHERE ws_sales_price / ws_list_price BETWEEN 65 * 0.01 AND 75 * 0.01 UNION SELECT DISTINCT cs_ship_customer_sk AS customer_sk FROM catalog_sales JOIN filtered_dates ON cs_sold_date_sk = d_date_sk JOIN filtered_items ON cs_item_sk = i_item_sk WHERE cs_sales_price / cs_list_price BETWEEN 65 * 0.01 AND 75 * 0.01) SELECT cd_gender, cd_marital_status, cd_education_status, COUNT(*) AS cnt1, cd_purchase_estimate, COUNT(*) AS cnt2, cd_credit_rating, COUNT(*) AS cnt3, cd_dep_count, COUNT(*) AS cnt4, cd_dep_employed_count, COUNT(*) AS cnt5, cd_dep_college_count, COUNT(*) AS cnt6 FROM customer AS c, customer_address AS ca, customer_demographics WHERE c.c_current_addr_sk = ca.ca_address_sk AND ca_county IN ('Alameda County', 'Lexington city', 'Pender County', 'Petroleum County', 'Walworth County') AND c.c_birth_month IN (4, 5) AND cd_demo_sk = c.c_current_cdemo_sk AND cd_marital_status IN ('U', 'S', 'U') AND cd_education_status IN ('College', 'Secondary', 'College') AND cd_gender = 'M' AND EXISTS(SELECT 1 FROM valid_store_sales AS vss WHERE vss.ss_customer_sk = c.c_customer_sk) AND (EXISTS(SELECT 1 FROM valid_web_or_catalog_sales AS vwcs WHERE vwcs.customer_sk = c.c_customer_sk)) GROUP BY cd_gender, cd_marital_status, cd_education_status, cd_purchase_estimate, cd_credit_rating, cd_dep_count, cd_dep_employed_count, cd_dep_college_count ORDER BY cd_gender, cd_marital_status, cd_education_status, cd_purchase_estimate, cd_credit_rating, cd_dep_count, cd_dep_employed_count, cd_dep_college_count LIMIT 100;",
      "has_explain": true
    },
    {
      "patch_id": "S0",
      "family": "B+E",
      "transform": "decorrelate_with_prefetch",
      "relevance_score": 0.95,
      "status": "NEUTRAL",
      "speedup": 0.99,
      "semantic_passed": true,
      "error": null,
      "original_ms": 875.6,
      "patch_ms": 881.2,
      "output_sql": "WITH filtered_dates AS (SELECT d_date_sk FROM date_dim WHERE d_year = 1999 AND d_moy BETWEEN 5 AND 5 + 3), filtered_items AS (SELECT i_item_sk FROM item WHERE i_category IN ('Children', 'Home', 'Women') AND i_manager_id BETWEEN 91 AND 100), valid_store_sales AS (SELECT DISTINCT ss_customer_sk FROM store_sales JOIN filtered_dates ON ss_sold_date_sk = d_date_sk JOIN filtered_items ON ss_item_sk = i_item_sk WHERE ss_sales_price / ss_list_price BETWEEN 65 * 0.01 AND 75 * 0.01), valid_web_or_catalog_sales AS (SELECT DISTINCT ws_bill_customer_sk AS customer_sk FROM web_sales JOIN filtered_dates ON ws_sold_date_sk = d_date_sk JOIN filtered_items ON ws_item_sk = i_item_sk WHERE ws_sales_price / ws_list_price BETWEEN 65 * 0.01 AND 75 * 0.01 UNION SELECT DISTINCT cs_ship_customer_sk AS customer_sk FROM catalog_sales JOIN filtered_dates ON cs_sold_date_sk = d_date_sk JOIN filtered_items ON cs_item_sk = i_item_sk WHERE cs_sales_price / cs_list_price BETWEEN 65 * 0.01 AND 75 * 0.01) SELECT cd_gender, cd_marital_status, cd_education_status, COUNT(*) AS cnt1, cd_purchase_estimate, COUNT(*) AS cnt2, cd_credit_rating, COUNT(*) AS cnt3, cd_dep_count, COUNT(*) AS cnt4, cd_dep_employed_count, COUNT(*) AS cnt5, cd_dep_college_count, COUNT(*) AS cnt6 FROM customer AS c, customer_address AS ca, customer_demographics WHERE c.c_current_addr_sk = ca.ca_address_sk AND ca_county IN ('Alameda County', 'Lexington city', 'Pender County', 'Petroleum County', 'Walworth County') AND c.c_birth_month IN (4, 5) AND cd_demo_sk = c.c_current_cdemo_sk AND cd_marital_status IN ('U', 'S', 'U') AND cd_education_status IN ('College', 'Secondary', 'College') AND cd_gender = 'M' AND EXISTS(SELECT 1 FROM valid_store_sales AS vss WHERE vss.ss_customer_sk = c.c_customer_sk) AND (EXISTS(SELECT 1 FROM valid_web_or_catalog_sales AS vwcs WHERE vwcs.customer_sk = c.c_customer_sk)) GROUP BY cd_gender, cd_marital_status, cd_education_status, cd_purchase_estimate, cd_credit_rating, cd_dep_count, cd_dep_employed_count, cd_dep_college_count ORDER BY cd_gender, cd_marital_status, cd_education_status, cd_purchase_estimate, cd_credit_rating, cd_dep_count, cd_dep_employed_count, cd_dep_college_count LIMIT 100;",
      "has_explain": true
    }
  ],
  "explains": {
    "S0": "Limit  (rows=0, time=953.462)\n  Index Only Scan on date_dim  (rows=123, time=0.073)\n  Seq Scan on item  (rows=2593, time=23.917)\n  Aggregate  (rows=0, time=953.46)\n    Sort  (rows=0, time=953.459)\n      Nested Loop  (rows=0, time=953.447)\n        Nested Loop  (rows=1, time=380.355)\n          Nested Loop  (rows=1, time=380.33)\n            Nested Loop  (rows=259, time=379.133)\n              Aggregate  (rows=1365, time=373.241)\n                Append  (rows=1369, time=372.913)\n                  Uni"
  }
}