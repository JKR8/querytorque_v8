[
  {
    "target_id": "t1",
    "family": "D+F",
    "transform": "setop_to_exists_with_merge_join",
    "relevance_score": 0.95,
    "hypothesis": "Replace INTERSECT with EXISTS in cross_items CTE to avoid materializing large sets. Sort this_year/last_year outputs by join keys to enable merge join and eliminate final Sort (5095 ms).",
    "target_ir": "S0: cross_items CTE; S0: MAIN QUERY (Q_S0)",
    "recommended_examples": [
      "pg_intersect_to_exists",
      "pg_explicit_join_materialized"
    ]
  },
  {
    "target_id": "t2",
    "family": "F",
    "transform": "merge_join_avoid_sort",
    "relevance_score": 0.9,
    "hypothesis": "Sort this_year and last_year subqueries by (i_brand_id, i_class_id, i_category_id) to enable merge join. Leverage join order for final ORDER BY, eliminating 5095 ms Sort.",
    "target_ir": "S0: MAIN QUERY (Q_S0) \u2192 this_year/last_year subqueries",
    "recommended_examples": [
      "pg_explicit_join_materialized"
    ]
  },
  {
    "target_id": "t3",
    "family": "D",
    "transform": "intersect_to_exists_preserve_literals",
    "relevance_score": 0.85,
    "hypothesis": "Fix literal mismatch in INTERSECT\u2192EXISTS rewrite. Preserve 'store' and 12 exactly to reduce SetOp time (2941 ms) without validation failure.",
    "target_ir": "S0: cross_items CTE",
    "recommended_examples": [
      "pg_intersect_to_exists"
    ]
  },
  {
    "target_id": "t4",
    "family": "A",
    "transform": "remove_redundant_filter",
    "relevance_score": 0.8,
    "hypothesis": "Remove redundant i_category/i_manager_id filters from cross_items's outer WHERE clause. Inner subqueries already enforce these via brand/class/category_id joins.",
    "target_ir": "S0: cross_items CTE \u2192 WHERE clause [888d3c332566b19b]",
    "recommended_examples": [
      "pg_date_cte_explicit_join"
    ]
  }
]