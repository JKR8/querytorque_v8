{
  "probe_id": "p04",
  "transform_id": "pg_self_join_decomposition",
  "family": "E",
  "status": "failed",
  "failure_reason": "Execution failure due to transaction abort; root cause traced to invalid column reference 'd1.d_week_seq' in final_select WHERE clause after CTE projection change.",
  "partial_work": {
    "attempted_approach": "Materialize core fact-dimension join in CTE and rewrite final_select to consume it",
    "blocking_issue": "Column 'd1.d_week_seq' referenced in final_select WHERE clause but not projected by filtered_sales CTE",
    "hypothesis_still_valid": true
  },
  "dialect": "postgres",
  "hypothesis": "Required d1.d_week_seq column missing from CTE projection caused execution failure; safe no-change returned to preserve semantics.",
  "reasoning_trace": [
    "filtered_sales CTE omitted d1.d_week_seq needed downstream",
    "Reference to d1.d_week_seq in final_select WHERE clause unresolved",
    "Column resolution error caused transaction abort at runtime"
  ],
  "target_ir": "No structural change due to projection mismatch.",
  "verification": {
    "executable": false,
    "no_missing_tables": true,
    "alias_consistent": false,
    "no_orphan_scans": true,
    "semantics_preserved": true,
    "null_semantics_safe": true,
    "ctes_selective_or_na": true
  },
  "tree": {
    "root_node_id": "final_select",
    "nodes": [
      {
        "node_id": "final_select",
        "parent_node_id": null,
        "sources": [],
        "outputs": ["i_item_desc", "w_warehouse_name", "d_week_seq", "no_promo", "promo", "total_cnt"],
        "changed": false
      }
    ]
  }
}