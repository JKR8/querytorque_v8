[
  {
    "target_id": "t2",
    "family": "A",
    "transform": "early_filter_web_sales_with_d2_dates",
    "relevance_score": 0.95,
    "hypothesis": "Pre-filter web_sales using a precomputed set of d2 dates (within 2001 and 2001+30 days) to reduce Seq Scan rows from 220K. Targets the bottleneck in t1_rescue's plan.",
    "target_ir": "S0: insert_cte('filtered_d2_dates', 'SELECT d_date_sk, d_date FROM date_dim WHERE d_date BETWEEN (SELECT MIN(d_date) FROM filtered_d1_dates) AND (SELECT MAX(d_date) FROM filtered_d1_dates) + INTERVAL ''30 DAY'''), then replace_expr_subtree(by_anchor_hash: [hash of filtered_web_sales body], 'SELECT * FROM web_sales WHERE ...', 'SELECT ws.* FROM web_sales ws JOIN filtered_d2_dates d2 ON ws.ws_sold_date_sk = d2.d_date_sk WHERE ws_wholesale_cost BETWEEN 35 AND 55')",
    "recommended_examples": [
      "pg_date_cte_explicit_join"
    ]
  },
  {
    "target_id": "t3",
    "family": "A+F",
    "transform": "cte_join_restructure",
    "relevance_score": 0.85,
    "hypothesis": "Restructure joins to process filtered CTEs (d1, web_sales) before merging with store_sales. Reduces input rows to the expensive Merge Join.",
    "target_ir": "S0: replace_from(main_query, 'JOIN filtered_web_sales ON ... JOIN filtered_d1_dates d1 ON ... JOIN store_sales ON ...')",
    "recommended_examples": [
      "pg_explicit_join_materialized",
      "pg_date_cte_explicit_join"
    ]
  },
  {
    "target_id": "t4",
    "family": "B",
    "transform": "decorrelate_d2_dates",
    "relevance_score": 0.75,
    "hypothesis": "Replace correlated subquery in t5 with a batched join between d2 and filtered_d1_dates to eliminate the expensive CTE Scan.",
    "target_ir": "S0: replace_expr_subtree(by_anchor_hash: [hash of d2 condition in t5], 'd2.d_date BETWEEN ...', 'JOIN filtered_d1_dates d1 ON d2.d_date BETWEEN d1.d_date AND (d1.d_date + INTERVAL ''30 DAY'')')",
    "recommended_examples": [
      "pg_shared_scan_decorrelate"
    ]
  }
]