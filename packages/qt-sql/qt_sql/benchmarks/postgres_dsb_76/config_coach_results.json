{
  "benchmark": "postgres_dsb_76",
  "config": {
    "max_iterations": 3,
    "max_candidates": 8,
    "min_speedup": 1.05
  },
  "results": [
    {
      "query_id": "query102_agg_i1",
      "status": "DRY_RUN",
      "baseline_ms": 422.2,
      "best_speedup": 0.0,
      "best_candidate": null,
      "best_config_commands": [],
      "best_hint_comment": "",
      "total_candidates_tested": 22,
      "total_api_calls": 3,
      "duration_seconds": 64.4,
      "iterations": [
        {
          "iteration": 1,
          "candidates": [
            {
              "id": "C1",
              "hypothesis": "Disable merge join to eliminate sort overhead on large inputs",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "enable_mergejoin": "off"
              },
              "hints": "NoMergeJoin(ss ws)",
              "reasoning": "EXPLAIN shows Merge Join with Sort below it on large unsorted inputs. Hash join will eliminate the sort overhead.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C2",
              "hypothesis": "Increase work_mem to prevent hash/sort spills",
              "predicted_speedup": "1.2-1.5x",
              "set_local": {
                "work_mem": "256MB"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows multiple hash joins and sorts. Increasing work_mem to 256MB will prevent spills to disk.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C3",
              "hypothesis": "Enable parallelism on large scans",
              "predicted_speedup": "1.3-1.8x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows large Seq Scans without parallel workers. Enabling parallelism will speed up these scans.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C4",
              "hypothesis": "Disable JIT to reduce overhead on short query",
              "predicted_speedup": "1.05-1.1x",
              "set_local": {
                "jit": "off"
              },
              "hints": "",
              "reasoning": "Query execution time is <500ms, and JIT overhead can exceed the savings from compiled execution.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C5",
              "hypothesis": "Force hash join on ss-cd to avoid nested loops",
              "predicted_speedup": "1.2-1.4x",
              "set_local": {
                "enable_nestloop": "off"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "EXPLAIN shows Nested Loop on large inputs. Forcing hash join will reduce the complexity from O(N\u00d7M) to O(N+M).",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C6",
              "hypothesis": "Adjust random_page_cost and effective_cache_size to favor index scans",
              "predicted_speedup": "1.1-1.3x",
              "set_local": {
                "random_page_cost": "1.1",
                "effective_cache_size": "48GB"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows Seq Scans on fact tables despite indexes. Adjusting these parameters will favor index scans.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            }
          ],
          "best_candidate_id": "",
          "best_speedup": 0.0
        },
        {
          "iteration": 2,
          "candidates": [
            {
              "id": "C1",
              "hypothesis": "Force hash join on ss-cd to avoid 30K NL loops",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "work_mem": "256MB",
                "enable_nestloop": "off"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "EXPLAIN shows NL with 30K loops on cd. Hash join at 256MB work_mem will fit in memory.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C2",
              "hypothesis": "Enable parallelism on large scans",
              "predicted_speedup": "1.3-1.8x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "",
              "reasoning": "Large Seq Scan on web_sales (>100K rows) without parallel workers. Enabling parallelism should speed up the scan.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C3",
              "hypothesis": "Increase work_mem to prevent hash/sort spills",
              "predicted_speedup": "1.2-1.5x",
              "set_local": {
                "work_mem": "512MB"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows Hash Batches > 1 on store_sales join \u2192 spilling to disk. Increasing work_mem to 512MB should eliminate spill.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C4",
              "hypothesis": "Disable JIT to reduce overhead on short query",
              "predicted_speedup": "1.05-1.1x",
              "set_local": {
                "jit": "off"
              },
              "hints": "",
              "reasoning": "Query execution time < 500ms. Disabling JIT should reduce overhead.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C5",
              "hypothesis": "Adjust random_page_cost and effective_cache_size to favor index scans",
              "predicted_speedup": "1.1-1.3x",
              "set_local": {
                "effective_cache_size": "48GB",
                "random_page_cost": "1.1"
              },
              "hints": "",
              "reasoning": "Seq Scan on web_sales despite btree index on filter/join columns. Adjusting random_page_cost and effective_cache_size should favor index scans.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C6",
              "hypothesis": "Force hash join on ss-cd and enable parallelism",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "work_mem": "256MB",
                "enable_nestloop": "off",
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "Combining hash join on ss-cd with parallelism on large scans should provide additive speedup.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C7",
              "hypothesis": "Increase work_mem and enable parallelism",
              "predicted_speedup": "1.3-1.8x",
              "set_local": {
                "work_mem": "512MB",
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "",
              "reasoning": "Increasing work_mem to prevent hash/sort spills combined with parallelism on large scans should provide additive speedup.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C8",
              "hypothesis": "Force hash join on ss-cd, increase work_mem, and enable parallelism",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "work_mem": "512MB",
                "enable_nestloop": "off",
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "Combining hash join on ss-cd, increasing work_mem to prevent spills, and enabling parallelism should provide maximum speedup.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            }
          ],
          "best_candidate_id": "",
          "best_speedup": 0.0
        },
        {
          "iteration": 3,
          "candidates": [
            {
              "id": "C1",
              "hypothesis": "Force hash join on ss-cd to avoid 30K NL loops",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "work_mem": "256MB",
                "enable_nestloop": "off"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "EXPLAIN shows NL with 30K loops on cd. Hash join at 256MB work_mem will fit in memory.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C2",
              "hypothesis": "Enable parallelism on large scans",
              "predicted_speedup": "1.3-1.8x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows large seq scans on web_sales and customer. Parallelism can speed up these scans.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C3",
              "hypothesis": "Increase work_mem to prevent hash/sort spills",
              "predicted_speedup": "1.2-1.5x",
              "set_local": {
                "work_mem": "512MB"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows hash joins with potential spills. Increasing work_mem to 512MB will prevent spills.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C4",
              "hypothesis": "Disable JIT to reduce overhead on short query",
              "predicted_speedup": "1.05-1.1x",
              "set_local": {
                "jit": "off"
              },
              "hints": "",
              "reasoning": "Query is short (<500ms) and JIT overhead may dominate. Disabling JIT can reduce this overhead.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C5",
              "hypothesis": "Adjust random_page_cost and effective_cache_size to favor index scans",
              "predicted_speedup": "1.1-1.3x",
              "set_local": {
                "effective_cache_size": "48GB",
                "random_page_cost": "1.1"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows seq scans on fact tables with indexes. Adjusting these params can tip planner to use index scans.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C6",
              "hypothesis": "Force hash join on ss-cd and enable parallelism",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "enable_nestloop": "off",
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001",
                "work_mem": "256MB"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "Combining hash join on ss-cd with parallelism on large scans can provide additive speedup.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C7",
              "hypothesis": "Increase work_mem and enable parallelism",
              "predicted_speedup": "1.3-1.8x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001",
                "work_mem": "512MB"
              },
              "hints": "",
              "reasoning": "Increasing work_mem to prevent spills combined with parallelism on large scans can provide additive speedup.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C8",
              "hypothesis": "Force hash join on ss-cd, increase work_mem, and enable parallelism",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "enable_nestloop": "off",
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001",
                "work_mem": "512MB"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "Combining hash join on ss-cd, increased work_mem, and parallelism on large scans can provide additive speedup.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            }
          ],
          "best_candidate_id": "",
          "best_speedup": 0.0
        }
      ]
    },
    {
      "query_id": "query102_agg_i2",
      "status": "DRY_RUN",
      "baseline_ms": 452.7,
      "best_speedup": 0.0,
      "best_candidate": null,
      "best_config_commands": [],
      "best_hint_comment": "",
      "total_candidates_tested": 19,
      "total_api_calls": 3,
      "duration_seconds": 72.0,
      "iterations": [
        {
          "iteration": 1,
          "candidates": [
            {
              "id": "C1",
              "hypothesis": "Disable merge join to eliminate sort overhead on large inputs",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "enable_mergejoin": "off"
              },
              "hints": "NoMergeJoin(ss ws)",
              "reasoning": "EXPLAIN shows Merge Join with Sort child node on large inputs. Disabling merge join forces hash join, eliminating sort overhead.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C2",
              "hypothesis": "Increase work_mem to prevent hash/sort spilling to disk",
              "predicted_speedup": "1.2-1.5x",
              "set_local": {
                "work_mem": "256MB"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows multiple hash and sort operations. Increasing work_mem to 256MB prevents spilling to disk, reducing I/O overhead.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C3",
              "hypothesis": "Enable parallel execution for large scans",
              "predicted_speedup": "1.3-1.8x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows large Seq Scans without parallel workers. Enabling parallelism reduces scan time by distributing the workload.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C4",
              "hypothesis": "Adjust random_page_cost and effective_cache_size for SSD-like behavior",
              "predicted_speedup": "1.1-1.4x",
              "set_local": {
                "random_page_cost": "1.1",
                "effective_cache_size": "48GB"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows Seq Scans on fact tables despite indexes. Adjusting these parameters encourages index scans, reducing I/O.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C5",
              "hypothesis": "Disable JIT compilation to reduce overhead on short queries",
              "predicted_speedup": "1.05-1.1x",
              "set_local": {
                "jit": "off"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows JIT compilation overhead on a query with baseline < 500ms. Disabling JIT eliminates this overhead.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C6",
              "hypothesis": "Force hash join on ss-cd to avoid nested loop overhead",
              "predicted_speedup": "1.2-1.6x",
              "set_local": {
                "enable_nestloop": "off"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "EXPLAIN shows Nested Loop on ss-cd with large inputs. Forcing hash join reduces the complexity from O(N\u00d7M) to O(N+M).",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            }
          ],
          "best_candidate_id": "",
          "best_speedup": 0.0
        },
        {
          "iteration": 2,
          "candidates": [
            {
              "id": "C1",
              "hypothesis": "Force hash join on ss-cd to avoid 30K NL loops",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "work_mem": "256MB",
                "enable_nestloop": "off"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "EXPLAIN shows NL with 30K loops on cd. Hash join at 256MB work_mem will fit in memory.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C2",
              "hypothesis": "Enable parallel execution for large scans on web_sales",
              "predicted_speedup": "1.3-1.8x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows large Seq Scan on web_sales without parallel workers. Parallel execution can speed up this scan.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C3",
              "hypothesis": "Adjust random_page_cost and effective_cache_size for SSD-like behavior",
              "predicted_speedup": "1.1-1.4x",
              "set_local": {
                "effective_cache_size": "48GB",
                "random_page_cost": "1.1"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows Seq Scan on fact tables despite indexes. Adjusting these parameters can encourage index scans.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C4",
              "hypothesis": "Disable JIT compilation to reduce overhead on short queries",
              "predicted_speedup": "1.05-1.1x",
              "set_local": {
                "jit": "off"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows JIT overhead on a query with baseline < 500ms. Disabling JIT can reduce this overhead.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C5",
              "hypothesis": "Force hash join on ss-cd and increase work_mem to prevent spilling",
              "predicted_speedup": "1.5-2x",
              "set_local": {
                "work_mem": "512MB",
                "enable_nestloop": "off"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "EXPLAIN shows NL with 30K loops on cd. Hash join at 512MB work_mem will fit in memory and prevent spilling.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C6",
              "hypothesis": "Combine parallel execution and increased work_mem for large scans and hash joins",
              "predicted_speedup": "1.8-2.2x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001",
                "work_mem": "256MB"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows large Seq Scan on web_sales and hash joins. Combining parallel execution and increased work_mem can speed up both operations.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C7",
              "hypothesis": "Force hash join on ss-cd and adjust random_page_cost and effective_cache_size",
              "predicted_speedup": "1.6-2x",
              "set_local": {
                "work_mem": "256MB",
                "enable_nestloop": "off",
                "effective_cache_size": "48GB",
                "random_page_cost": "1.1"
              },
              "hints": "HashJoin(ss cd)",
              "reasoning": "EXPLAIN shows NL with 30K loops on cd and Seq Scan on fact tables. Combining hash join and index scan optimizations can speed up the query.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C8",
              "hypothesis": "Combine parallel execution, increased work_mem, and disable JIT",
              "predicted_speedup": "1.8-2.2x",
              "set_local": {
                "max_parallel_workers_per_gather": "4",
                "parallel_setup_cost": "100.0",
                "parallel_tuple_cost": "0.001",
                "work_mem": "256MB",
                "jit": "off"
              },
              "hints": "",
              "reasoning": "EXPLAIN shows large Seq Scan on web_sales, hash joins, and JIT overhead. Combining these optimizations can speed up the query.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            }
          ],
          "best_candidate_id": "",
          "best_speedup": 0.0
        },
        {
          "iteration": 3,
          "candidates": [
            {
              "id": "C1",
              "hypothesis": "Force sequential scan on customer table to avoid slow index scan overhead",
              "predicted_speedup": "1.2-1.5x",
              "set_local": {
                "enable_seqscan": "on"
              },
              "hints": "SeqScan(c)",
              "reasoning": "Seq scan on customer may be faster than current index scan approach given HDD storage.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C2",
              "hypothesis": "Reduce parallel overhead by lowering parallel_tuple_cost for large web_sales scan",
              "predicted_speedup": "1.1-1.3x",
              "set_local": {
                "parallel_tuple_cost": "0.01"
              },
              "hints": "",
              "reasoning": "Conservative parallel cost reduction may help with web_sales scan without regressions seen in previous parallel attempts.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C3",
              "hypothesis": "Enable hash join between customer and household_demographics",
              "predicted_speedup": "1.1-1.4x",
              "set_local": {},
              "hints": "HashJoin(c hd)",
              "reasoning": "Current join method may be suboptimal for this specific join path.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C5",
              "hypothesis": "Lower random_page_cost moderately to slightly favor some index scans",
              "predicted_speedup": "1.05-1.2x",
              "set_local": {
                "random_page_cost": "3.0"
              },
              "hints": "",
              "reasoning": "Slightly adjusted random_page_cost may better reflect HDD capabilities without causing regressions.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            },
            {
              "id": "C6",
              "hypothesis": "Force bitmap scan on date_dim tables",
              "predicted_speedup": "1.1-1.5x",
              "set_local": {},
              "hints": "BitmapScan(d1) BitmapScan(d2)",
              "reasoning": "Date_dim tables may benefit from bitmap scans over current index scans.",
              "elapsed_ms": 0.0,
              "speedup": 0.0,
              "row_count": 0,
              "rows_match": true,
              "error": ""
            }
          ],
          "best_candidate_id": "",
          "best_speedup": 0.0
        }
      ]
    }
  ]
}