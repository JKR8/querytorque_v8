{
  "id": "EXTENDED_STATS_NDISTINCT",
  "name": "Extended Stats Ndistinct",
  "description": "Create n-distinct statistics for column combinations used in GROUP BY\n      to correct group count estimates.",
  "category": "statistics_configuration",
  "priority": "medium",
  "verified_speedup": "unknown",
  "example": {
    "before_sql": "EXPLAIN SELECT COUNT(*) FROM orders \n      GROUP BY product_type, warehouse_id;\n      -- rows=1000000 (actual: 100)",
    "after_sql": "CREATE STATISTICS stts_orders_nd (ndistinct) \n      ON product_type, warehouse_id FROM orders;\n      ANALYZE orders;\n      \n      EXPLAIN SELECT COUNT(*) FROM orders \n      GROUP BY product_type, warehouse_id;\n      -- rows=100 (accurate)",
    "alternative_sql": "",
    "key_insight": "GROUP BY queries with severely over/underestimated group counts\n      leading to wrong HashAggregate vs GroupAggregate choice.",
    "transforms": [
      "extended_stats_ndistinct"
    ]
  },
  "metadata": {
    "pg_version": "10+",
    "auto_applied_by_pg": "false",
    "research_source": "",
    "notes": ""
  }
}