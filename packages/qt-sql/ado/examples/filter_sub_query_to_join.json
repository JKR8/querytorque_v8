{
  "id": "FILTER_SUB_QUERY_TO_JOIN",
  "name": "Filter Subquery to Join",
  "description": "Scalar/IN/EXISTS subquery in WHERE rewritten to JOIN",
  "verified_speedup": "unknown",
  "example": {
    "opportunity": "FILTER_SUB_QUERY_TO_JOIN",
    "before_sql": "SELECT t1.id, t1.name FROM t1 WHERE t1.x IN (SELECT t2.y FROM t2 WHERE t2.active = true)",
    "output": {
      "rewrite_sets": [
        {
          "id": "rs_01",
          "transform": "filter_sub_query_to_join",
          "nodes": {
            "main_query": "SELECT ... FROM t1 JOIN t2 ON t1.x = t2.y WHERE ..."
          },
          "invariants_kept": ["same result rows", "same output columns"],
          "expected_speedup": "2x",
          "risk": "medium"
        }
      ]
    },
    "key_insight": "Rewrite scalar/IN/EXISTS subqueries into joins to enable predicate pushdown and better join planning."
  }
}
