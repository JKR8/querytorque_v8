# DSB Query → Rule Mapping
Generated for ADO PostgreSQL DSB optimization

## Summary
- Total DSB queries: 52
- All queries have ≥3 rules: ✓

## Rule Usage (top 15)

| Rule | Queries |
|------|---------|
| STAR_SCHEMA_DIMENSION_FILTER_FIRST | 52 |
| DSB_NON_EQUI_JOIN_WINDOW | 49 |
| AGGREGATE_PUSH_BELOW_JOIN | 42 |
| SUBQUERY_OFFSET_ZERO_BARRIER | 37 |
| JOIN_ORDER_COLLAPSE_LIMIT | 37 |
| CTE_OPTIMIZATION_FENCE_MATERIALIZED | 14 |
| CTE_INLINE_NOT_MATERIALIZED | 14 |
| DSB_SELF_JOIN_DECOMPOSITION | 12 |
| SELF_JOIN_TO_WINDOW | 12 |
| DSB_PREDICATE_CORRELATION_STATS | 11 |
| OR_TO_UNION_ALL | 11 |
| CORRELATED_SUBQUERY_TO_WINDOW | 11 |
| FILTER_SUB_QUERY_TO_JOIN | 9 |
| CORRELATED_AGGREGATE_TO_LATERAL | 8 |
| CORRELATED_WHERE_TO_DERIVED_TABLE | 8 |

## Query Mappings

### query001_multi
Rules (7): STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, FILTER_SUB_QUERY_TO_JOIN, CORRELATED_AGGREGATE_TO_LATERAL, CORRELATED_WHERE_TO_DERIVED_TABLE
  + 2 more...

### query010_multi
Rules (6): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, EXISTS_SUBPLAN_TO_SEMI_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, OR_TO_UNION_ALL
  + 1 more...

### query013_agg
Rules (7): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT
  + 2 more...

### query013_spj_spj
Rules (7): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT
  + 2 more...

### query014_multi
Rules (14): DSB_SELF_JOIN_DECOMPOSITION, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED
  + 9 more...

### query018_agg
Rules (6): AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, AGGREGATE_PULL_UP_CONSTANTS
  + 1 more...

### query018_spj_spj
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER

### query019_agg
Rules (4): STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER, DSB_NON_EQUI_JOIN_WINDOW

### query019_spj_spj
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER

### query023_multi
Rules (12): DSB_SELF_JOIN_DECOMPOSITION, AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, FILTER_SUB_QUERY_TO_JOIN
  + 7 more...

### query025_agg
Rules (7): DSB_SELF_JOIN_DECOMPOSITION, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW
  + 2 more...

### query025_spj_spj
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER

### query027_agg
Rules (6): AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, AGGREGATE_PULL_UP_CONSTANTS
  + 1 more...

### query027_spj_spj
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER

### query030_multi
Rules (8): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, FILTER_SUB_QUERY_TO_JOIN, CORRELATED_AGGREGATE_TO_LATERAL
  + 3 more...

### query031_multi
Rules (8): DSB_SELF_JOIN_DECOMPOSITION, AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, SELF_JOIN_TO_WINDOW
  + 3 more...

### query032_multi
Rules (7): DSB_SELF_JOIN_DECOMPOSITION, DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW
  + 2 more...

### query038_multi
Rules (9): DSB_SELF_JOIN_DECOMPOSITION, TOP_N_PER_GROUP_DISTINCT_ON, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW
  + 4 more...

### query039_multi
Rules (8): AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, CORRELATED_SUBQUERY_TO_WINDOW
  + 3 more...

### query040_agg
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, COALESCE_NULL_PROPAGATION, CORRELATED_SUBQUERY_TO_WINDOW, DSB_NON_EQUI_JOIN_WINDOW

### query040_spj_spj
Rules (3): STAR_SCHEMA_DIMENSION_FILTER_FIRST, AGGREGATE_PUSH_BELOW_JOIN, DSB_NON_EQUI_JOIN_WINDOW

### query050_agg
Rules (6): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, CORRELATED_SUBQUERY_TO_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT
  + 1 more...

### query050_spj_spj
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER

### query054_multi
Rules (11): TOP_N_PER_GROUP_DISTINCT_ON, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED
  + 6 more...

### query058_multi
Rules (8): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, FILTER_SUB_QUERY_TO_JOIN, CORRELATED_AGGREGATE_TO_LATERAL
  + 3 more...

### query059_multi
Rules (5): STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, CORRELATED_SUBQUERY_TO_WINDOW, CTE_INLINE_NOT_MATERIALIZED, DSB_NON_EQUI_JOIN_WINDOW

### query064_multi
Rules (5): STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, CORRELATED_SUBQUERY_TO_WINDOW, CTE_INLINE_NOT_MATERIALIZED, DSB_NON_EQUI_JOIN_WINDOW

### query065_multi
Rules (7): DSB_SELF_JOIN_DECOMPOSITION, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW
  + 2 more...

### query069_multi
Rules (7): AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, EXISTS_SUBPLAN_TO_SEMI_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, ANTI_JOIN_LEFT_JOIN_IS_NULL
  + 2 more...

### query072_agg
Rules (6): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, CORRELATED_SUBQUERY_TO_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT
  + 1 more...

### query072_spj_spj
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER

### query075_multi
Rules (9): AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, COALESCE_NULL_PROPAGATION
  + 4 more...

### query080_multi
Rules (10): AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, COALESCE_NULL_PROPAGATION
  + 5 more...

### query081_multi
Rules (8): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, FILTER_SUB_QUERY_TO_JOIN, CORRELATED_AGGREGATE_TO_LATERAL
  + 3 more...

### query083_multi
Rules (6): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, CTE_OPTIMIZATION_FENCE_MATERIALIZED, FILTER_SUB_QUERY_TO_JOIN, CTE_INLINE_NOT_MATERIALIZED
  + 1 more...

### query084_agg
Rules (4): STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, COALESCE_NULL_PROPAGATION, SUBQUERY_OFFSET_ZERO_BARRIER

### query084_spj_spj
Rules (4): STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER

### query085_agg
Rules (7): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT
  + 2 more...

### query085_spj_spj
Rules (7): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT
  + 2 more...

### query087_multi
Rules (7): DSB_SELF_JOIN_DECOMPOSITION, TOP_N_PER_GROUP_DISTINCT_ON, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW
  + 2 more...

### query091_agg
Rules (7): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT
  + 2 more...

### query091_spj_spj
Rules (7): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT
  + 2 more...

### query092_multi
Rules (7): DSB_SELF_JOIN_DECOMPOSITION, DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW
  + 2 more...

### query094_multi
Rules (11): DSB_SELF_JOIN_DECOMPOSITION, TOP_N_PER_GROUP_DISTINCT_ON, AGGREGATE_PUSH_BELOW_JOIN, EXISTS_SUBPLAN_TO_SEMI_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST
  + 6 more...

### query099_agg
Rules (6): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, CORRELATED_SUBQUERY_TO_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT
  + 1 more...

### query099_spj_spj
Rules (4): STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER

### query100_agg
Rules (6): DSB_SELF_JOIN_DECOMPOSITION, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT
  + 1 more...

### query100_spj_spj
Rules (7): DSB_SELF_JOIN_DECOMPOSITION, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, SELF_JOIN_TO_WINDOW
  + 2 more...

### query101_agg
Rules (4): STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER, DSB_NON_EQUI_JOIN_WINDOW

### query101_spj_spj
Rules (5): AGGREGATE_PUSH_BELOW_JOIN, STAR_SCHEMA_DIMENSION_FILTER_FIRST, DSB_NON_EQUI_JOIN_WINDOW, JOIN_ORDER_COLLAPSE_LIMIT, SUBQUERY_OFFSET_ZERO_BARRIER

### query102_agg
Rules (6): DSB_PREDICATE_CORRELATION_STATS, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT, OR_TO_UNION_ALL
  + 1 more...

### query102_spj_spj
Rules (7): DSB_PREDICATE_CORRELATION_STATS, AGGREGATE_PUSH_BELOW_JOIN, SUBQUERY_OFFSET_ZERO_BARRIER, STAR_SCHEMA_DIMENSION_FILTER_FIRST, JOIN_ORDER_COLLAPSE_LIMIT
  + 2 more...
