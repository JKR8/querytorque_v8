{
  "id": "LATERAL_FORCE_NESTED_LOOP",
  "name": "Lateral Force Nested Loop",
  "description": "Use CROSS JOIN LATERAL to force nested loop execution when you know\n      it's optimal (small outer table, indexed inner lookup).",
  "category": "subquery_transformations",
  "priority": "medium",
  "verified_speedup": "unknown",
  "example": {
    "before_sql": "-- Planner may choose hash join\n      SELECT a.*, b.*\n      FROM small_table a \n      JOIN large_indexed_table b ON a.id = b.ref_id;",
    "after_sql": "-- LATERAL always executes as nested loop\n      SELECT a.*, b.*\n      FROM small_table a\n      CROSS JOIN LATERAL (\n          SELECT * FROM large_indexed_table \n          WHERE ref_id = a.id\n      ) b;\n\n  # ============================================================================\n  # CTE MATERIALIZATION CONTROL\n  # ============================================================================",
    "alternative_sql": "",
    "key_insight": "When planner incorrectly chooses hash/merge join but nested loop with\n      parameterized index scan would be faster.",
    "transforms": [
      "lateral_force_nested_loop"
    ]
  },
  "metadata": {
    "pg_version": "9.3+",
    "auto_applied_by_pg": "false",
    "research_source": "",
    "notes": ""
  }
}