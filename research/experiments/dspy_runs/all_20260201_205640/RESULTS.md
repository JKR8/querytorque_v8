# TPC-DS Optimization Results

**Database:** DuckDB SF100 (100GB)
**Optimizer:** DSPy + DeepSeek V3
**Date:** 2026-02-02

## Summary

| Metric | Value |
|--------|-------|
| Queries Optimized | 82/99 |
| Average Speedup | 1.14x |
| Big Wins (≥1.5x) | 10 |
| Regressions (<1.0x) | 29 |

## Full Results

| Query | Status | Original | Optimized | Speedup |
|-------|--------|----------|-----------|---------|
| q1 | ✓ | 20.3ms | 15.0ms | 1.35x |
| q2 | ✗ | - | - | - |
| q3 | ✓ | 7.8ms | 7.8ms | 1.00x |
| q4 | ✓ | 667.4ms | 533.1ms | 1.25x |
| q5 | ✓ | 20.7ms | 22.8ms | 0.91x ↓ |
| q6 | ✓ | 31.8ms | 29.5ms | 1.08x |
| q7 | ✓ | 40.7ms | 42.5ms | 0.96x ↓ |
| q8 | ✓ | 472.5ms | 450.3ms | 1.05x |
| q9 | ✓ | 32.6ms | 32.6ms | 1.00x |
| q10 | ✓ | 35.7ms | 31.8ms | 1.12x |
| q11 | ✗ | - | - | - |
| q12 | ✓ | 31.1ms | 33.2ms | 0.94x ↓ |
| q13 | ✗ | - | - | - |
| q14 | ✗ | - | - | - |
| q15 | ✓ | 108.7ms | 36.5ms | **2.98x** ★★ |
| q16 | ✓ | 15.9ms | 13.7ms | 1.16x |
| q17 | ✓ | 24.2ms | 19.6ms | 1.23x |
| q18 | ✓ | 60.1ms | 59.5ms | 1.01x |
| q19 | ✓ | 23.5ms | 23.5ms | 1.00x |
| q20 | ✓ | 36.0ms | 33.3ms | 1.08x |
| q21 | ✓ | 7.9ms | 8.7ms | 0.91x ↓ |
| q22 | ✓ | 294.8ms | 312.5ms | 0.94x ↓ |
| q23 | ✓ | 1035.6ms | 444.7ms | **2.33x** ★★ |
| q24 | ✓ | 110.8ms | 51.3ms | **2.16x** ★★ |
| q25 | ✓ | 11.6ms | 11.6ms | 1.00x |
| q26 | ✓ | 28.8ms | 27.9ms | 1.03x |
| q27 | ✓ | 44.5ms | 44.3ms | 1.01x |
| q28 | ✓ | 40.6ms | 40.6ms | 1.00x |
| q29 | ✓ | 21.4ms | 17.0ms | 1.26x |
| q30 | ✗ | - | - | - |
| q31 | ✓ | 50.6ms | 46.4ms | 1.09x |
| q32 | ✓ | 11.6ms | 10.1ms | 1.15x |
| q33 | ✗ | - | - | - |
| q34 | ✓ | 13.2ms | 13.2ms | 1.00x |
| q35 | ✗ | - | - | - |
| q36 | ✓ | 65.8ms | 64.7ms | 1.02x |
| q37 | ✓ | 14.1ms | 17.1ms | 0.83x ↓ |
| q38 | ✗ | - | - | - |
| q39 | ✓ | 577.6ms | 236.3ms | **2.44x** ★★ |
| q40 | ✓ | 59.3ms | 53.7ms | 1.10x |
| q41 | ✓ | 80.9ms | 47.9ms | **1.69x** ★ |
| q42 | ✓ | 27.4ms | 25.9ms | 1.06x |
| q43 | ✓ | 40.7ms | 49.7ms | 0.82x ↓ |
| q44 | ✓ | 53.5ms | 48.2ms | 1.11x |
| q45 | ✓ | 245.9ms | 108.8ms | **2.26x** ★★ |
| q46 | ✓ | 328.4ms | 417.3ms | 0.79x ↓ |
| q47 | ✓ | 535.6ms | 433.6ms | 1.24x |
| q48 | ✓ | - | - | 1.01x |
| q49 | ✗ | - | - | - |
| q50 | ✓ | 57.2ms | 52.9ms | 1.08x |
| q51 | ✓ | 505.9ms | 442.3ms | 1.14x |
| q52 | ✓ | 45.9ms | 46.8ms | 0.98x ↓ |
| q53 | ✗ | - | - | - |
| q54 | ✓ | 196.3ms | 215.6ms | 0.91x ↓ |
| q55 | ✓ | 45.1ms | 45.4ms | 0.99x ↓ |
| q56 | ✗ | - | - | - |
| q57 | ✓ | 506.9ms | 934.5ms | 0.54x ↓ |
| q58 | ✓ | 61.5ms | 55.5ms | 1.11x |
| q59 | ✗ | - | - | - |
| q60 | ✓ | 188.1ms | 194.5ms | 0.97x ↓ |
| q61 | ✓ | 29.6ms | 23.9ms | 1.24x |
| q62 | ✓ | 42.7ms | 34.4ms | 1.24x |
| q63 | ✓ | 56.0ms | 151.8ms | 0.37x ↓ |
| q64 | ✓ | 96.5ms | 82.6ms | 1.17x |
| q65 | ✓ | 230.5ms | 199.5ms | 1.16x |
| q66 | ✓ | 64.1ms | 58.0ms | 1.10x |
| q67 | ✓ | 1439.5ms | 1642.6ms | 0.88x ↓ |
| q68 | ✓ | 299.5ms | 422.7ms | 0.71x ↓ |
| q69 | ✓ | 442.7ms | 362.2ms | 1.22x |
| q70 | ✗ | - | - | - |
| q71 | ✓ | 261.4ms | 259.1ms | 1.01x |
| q72 | ✓ | 266.3ms | 337.0ms | 0.79x ↓ |
| q73 | ✓ | 123.2ms | 143.1ms | 0.86x ↓ |
| q74 | ✓ | 738.5ms | 449.5ms | **1.64x** ★ |
| q75 | ✓ | 270.0ms | 272.3ms | 0.99x ↓ |
| q76 | ✓ | 42.3ms | 88.5ms | 0.48x ↓ |
| q77 | ✗ | - | - | - |
| q78 | ✓ | 319.0ms | 405.5ms | 0.79x ↓ |
| q79 | ✓ | 180.4ms | 173.9ms | 1.04x |
| q80 | ✓ | 92.3ms | 95.4ms | 0.97x ↓ |
| q81 | ✗ | - | - | - |
| q82 | ✓ | 59.8ms | 48.6ms | 1.23x |
| q83 | ✓ | 69.1ms | 89.8ms | 0.77x ↓ |
| q84 | ✓ | 248.7ms | 230.7ms | 1.08x |
| q85 | ✓ | 82.4ms | 70.4ms | 1.17x |
| q86 | ✓ | 89.0ms | 127.5ms | 0.70x ↓ |
| q87 | ✓ | 404.4ms | 409.5ms | 0.99x ↓ |
| q88 | ✓ | 52.4ms | 33.5ms | **1.56x** ★ |
| q89 | ✓ | 185.1ms | 246.1ms | 0.75x ↓ |
| q90 | ✓ | 57.1ms | 43.3ms | 1.32x |
| q91 | ✓ | 149.6ms | 164.1ms | 0.91x ↓ |
| q92 | ✓ | 101.0ms | 49.0ms | **2.06x** ★★ |
| q93 | ✗ | - | - | - |
| q94 | ✗ | - | - | - |
| q95 | ✓ | 244.3ms | 108.7ms | **2.25x** ★★ |
| q96 | ✓ | 26.6ms | 22.7ms | 1.17x |
| q97 | ✓ | 124.8ms | 134.1ms | 0.93x ↓ |
| q98 | ✓ | 168.8ms | 152.0ms | 1.11x |
| q99 | ✓ | 48.5ms | 51.8ms | 0.94x ↓ |

## Big Wins (≥1.5x)

| Query | Speedup | Technique |
|-------|---------|-----------|
| q15 | 2.98x | - |
| q39 | 2.44x | - |
| q23 | 2.33x | - |
| q45 | 2.26x | - |
| q95 | 2.25x | - |
| q24 | 2.16x | - |
| q92 | 2.06x | - |
| q41 | 1.69x | - |
| q74 | 1.64x | - |
| q88 | 1.56x | - |

## Legend

- ✓ = Optimization successful (semantically correct)
- ✗ = Optimization failed validation
- ★★ = 2x+ speedup
- ★ = 1.5x+ speedup
- ↓ = Regression (slower than original)