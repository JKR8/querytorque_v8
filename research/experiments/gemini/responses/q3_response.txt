{
  "operations": [
    {
      "op": "add_cte",
      "after": "start",
      "name": "filtered_date",
      "sql": "SELECT d_date_sk, d_year FROM date_dim WHERE d_moy = 11"
    },
    {
      "op": "add_cte",
      "after": "filtered_date",
      "name": "filtered_item",
      "sql": "SELECT i_item_sk, i_brand, i_brand_id FROM item WHERE i_manufact_id = 816"
    },
    {
      "op": "replace_clause",
      "target": "main_query.from",
      "sql": "from filtered_date dt\n      ,store_sales\n      ,filtered_item item"
    },
    {
      "op": "replace_clause",
      "target": "main_query.where",
      "sql": "where dt.d_date_sk = store_sales.ss_sold_date_sk\n   and store_sales.ss_item_sk = item.i_item_sk"
    }
  ],
  "semantic_warnings": [],
  "explanation": "Used CTEs to explicitly filter 'date_dim' and 'item' tables before joining them to the large 'store_sales' fact table. This enforces Predicate Pushdown (Pattern 1)."
}