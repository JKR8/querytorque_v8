{
  "id": "SEMANTIC_EQUIVALENCE",
  "severity": "CRITICAL",
  "description": "The rewritten query MUST return exactly the same rows, columns, and ordering as the original. This is the prime directive.",
  "constraint_rules": [
    {
      "rule": "SAME_ROWS",
      "description": "The rewritten query must produce the same set of rows as the original. No rows may be added or removed."
    },
    {
      "rule": "SAME_COLUMNS",
      "description": "The rewritten query must return the same columns in the same order with the same names and data types."
    },
    {
      "rule": "SAME_ORDERING",
      "description": "If the original query has an ORDER BY clause, the rewritten query must preserve the same ordering."
    }
  ],
  "prompt_instruction": "The rewritten query MUST return exactly the same rows, columns, and ordering as the original. This is the prime directive. Any rewrite that changes the result set — even by one row, one column, or a different sort order — is WRONG and will be REJECTED."
}
